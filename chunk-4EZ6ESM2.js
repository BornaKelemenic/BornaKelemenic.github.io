import{b as lt,e as mt,f as ct,g as st,h as pt}from"./chunk-BBDEQT4M.js";import{c as at}from"./chunk-FBAQB5PR.js";import{a as it}from"./chunk-MLDSC6UT.js";import"./chunk-5MQ7XYZV.js";import{b as q,c as z,d as J,f as U,g as X,h as Y}from"./chunk-5M6SDQAB.js";import{a as et}from"./chunk-YHEBO5DW.js";import{a as b,c as d,i as E,k as nt,o as k,q as rt,t as ot}from"./chunk-U6CN3XCF.js";import{a as W,c as R,e as H}from"./chunk-LTQDWN26.js";import{$a as f,Bb as O,Dd as Z,Eb as g,Ed as tt,Fb as h,Gb as j,Ka as B,Pa as p,V as P,Xa as y,Ya as x,Z as T,Za as o,_ as D,_a as i,a as I,ab as F,b as A,bb as V,cc as G,db as M,ec as N,f as c,fa as C,ga as _,gb as v,ib as u,p as w,tb as m,ub as L,va as a,vb as S,xb as $,xd as K,yd as Q}from"./chunk-DH4MWFWR.js";var ut=(()=>{class t{constructor(){this.entries$=w(b(()=>d.arrowCountEntries.orderBy("date").reverse().toArray())),this.entriesGroupedByDate$=w(b(()=>c(this,null,function*(){return(yield d.arrowCountEntries.orderBy("date").reverse().toArray()).reduce((n,r)=>{let s=new Date(r.date).toISOString().split("T")[0];return n[s]||(n[s]=[]),n[s].push({id:r.id,value:r.value}),n},{})})))}addEntry(e){return c(this,null,function*(){return yield d.arrowCountEntries.add(A(I({},e),{date:new Date().toISOString()}))})}deleteEntry(e){return c(this,null,function*(){return yield d.arrowCountEntries.delete(e)})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ct=(t,l)=>l.key,_t=(t,l)=>l.id;function ft(t,l){if(t&1){let e=M();o(0,"mat-list-item"),m(1),o(2,"button",11),v("click",function(){let r=C(e).$implicit,s=u(3);return _(s.arrowCountEntriesService.deleteEntry(r.id))}),o(3,"mat-icon"),m(4,"delete"),i()()()}if(t&2){let e=l.$implicit;a(),S(" ",e.value," ")}}function vt(t,l){if(t&1&&(o(0,"div",10),m(1),g(2,"date"),i(),y(3,ft,5,1,"mat-list-item",null,_t)),t&2){let e=l.$implicit;a(),S(" ",j(2,1,e.key,"longDate")," "),a(2),x(e.value)}}function gt(t,l){if(t&1){let e=M();F(0),o(1,"app-page-with-title",1)(2,"mat-card")(3,"mat-card-header")(4,"mat-card-title"),m(5),i()(),o(6,"mat-card-content")(7,"div",2)(8,"div",3)(9,"span"),m(10,"Shooting:"),i(),f(11,"app-small-counter",4),i(),o(12,"div",5)(13,"span"),m(14,"Count:"),i(),f(15,"app-small-counter",6),i()()(),o(16,"mat-card-actions")(17,"button",7),v("click",function(){C(e);let r=u();return _(r.countControl.reset())}),m(18,"Reset count"),i(),f(19,"span",8),o(20,"button",9),v("click",function(){C(e);let r=u();return _(r.saveCount())}),m(21," Save count "),i()()(),$(22),g(23,"async"),g(24,"keyvalue"),o(25,"mat-list"),y(26,vt,5,4,null,null,Ct),i()(),V()}if(t&2){let e=l.$implicit,n=u();a(),p("page-title",e("navbar.arrowCounter")),a(4),L(e("navbar.arrowCounter")),a(6),p("formControl",n.shootingCountControl)("min",1),a(4),p("moreIncrementAmount",n.shootingCountControl.value)("formControl",n.countControl)("min",0),a(5),p("disabled",n.countControl.invalid);let r=h(24,10,h(23,8,n.arrowCountEntriesService.entriesGroupedByDate$));a(6),x(r)}}var Ht=(()=>{class t{constructor(){this.arrowCountEntriesService=T(ut),this.shootingCountControl=new k(6,{nonNullable:!0,validators:[E.min(1)]}),this.countControl=new k(0,{nonNullable:!0,validators:[E.min(0)]})}saveCount(){return c(this,null,function*(){yield this.arrowCountEntriesService.addEntry({value:this.countControl.value}),this.countControl.reset()})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=D({type:t,selectors:[["app-arrow-counter-page"]],standalone:!0,features:[O],decls:1,vars:0,consts:[[4,"transloco"],["page-back-link","/",3,"page-title"],[1,"padding-y-4x"],[1,"flex-row","align-items-center","justify-content-space-between"],["disableControlsWhenOverLimit","",3,"formControl","min"],[1,"flex-row","align-items-center","justify-content-space-between","margin-top-4x"],["moreIncrements","","disableControlsWhenOverLimit","",3,"moreIncrementAmount","formControl","min"],["mat-button","","color","warn",3,"click"],[1,"spacer"],["mat-flat-button","",3,"click","disabled"],["matSubheader",""],["matListItemMeta","","mat-icon-button","",3,"click"]],template:function(n,r){n&1&&B(0,gt,28,12,"ng-container",0)},dependencies:[G,N,Q,K,ot,nt,rt,at,et,it,pt,mt,ct,st,lt,Y,q,U,J,X,z,H,W,R,tt,Z],styles:["[_nghost-%COMP%]{display:block}mat-card[_ngcontent-%COMP%], mat-list[_ngcontent-%COMP%]{margin:0 auto;max-width:600px}"],changeDetection:0})}}return t})();export{Ht as ArrowCounterPageComponent};
