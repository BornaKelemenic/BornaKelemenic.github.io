import{b as ct,c as pt,d as dt,e as re,f as Lt,g as Pt,h as At}from"./chunk-ZFDZI3CV.js";import"./chunk-PNKIQI5A.js";import{a as Tt,c as Ft,d as Dt,e as Et,f as It,g as $t,h as Bt,i as wt,j as kt,k as zt,l as me,n as ce,o as pe}from"./chunk-KJZIKPQE.js";import{a as de,b as ge,c as ue,d as fe}from"./chunk-Y2XM3CAW.js";import{c as ae,d as st,e as rt,f as lt,g as mt,h as j,i as Nt}from"./chunk-HHURPW5X.js";import{a as ht,b as _t,e as se,f as vt,g as H}from"./chunk-ASWZLOHO.js";import{F as bt}from"./chunk-RVVXJ2F4.js";import{a as gt,b as ut,c as Ot}from"./chunk-FBAQB5PR.js";import{a as Rt}from"./chunk-MLDSC6UT.js";import{a as Ge,f as Ke,h as K,i as W,k as We,l as it,m as nt}from"./chunk-5MQ7XYZV.js";import{a as St}from"./chunk-YHEBO5DW.js";import{a as ft,i as Ct,k as xt,o as le,q as yt,t as Mt}from"./chunk-U6CN3XCF.js";import{a as ie,b as ne,c as oe,e as w}from"./chunk-LTQDWN26.js";import{$ as we,$a as h,Ba as Ae,Bb as _,Db as je,Dd as k,Eb as M,Ed as R,Fb as D,G as Ie,Gb as He,Ja as Ve,Jc as Qe,Ka as g,Lb as qe,M as $,Mc as Je,P as U,Pa as p,Qb as ee,Ra as X,Sb as Ue,Sc as Xe,Ua as E,V as $e,Va as Z,Vb as Ze,Vc as Ce,W as Be,Xa as L,Xb as Ye,Ya as O,Z as c,Za as a,_ as f,_a as s,a as Fe,aa as ke,ab as C,bb as x,cc as V,da as Re,db as I,f as he,fa as v,fd as et,ga as S,gb as y,ib as m,ic as te,la as ze,na as Le,oa as Oe,od as tt,p as De,pa as P,qa as Ne,sb as G,t as Ee,ta as Pe,tb as r,td as Y,u as _e,ub as u,ud as ot,va as o,vb as d,wa as A,wb as be,wd as at,xb as B,xd as T,yb as ve,yd as F,zb as Se}from"./chunk-DH4MWFWR.js";var Yt=0,Vt="mat-badge-content",xe=new Set,Qt=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=f({type:t,selectors:[["ng-component"]],standalone:!0,features:[_],decls:0,vars:0,template:function(i,n){},styles:[".mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-app-error));color:var(--mat-badge-text-color, var(--mat-app-on-error));font-family:var(--mat-badge-text-font, var(--mat-app-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-app-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-app-corner-full))}.cdk-high-contrast-active .mat-badge-content{outline:solid 1px;border-radius:0}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color);color:var(--mat-badge-disabled-state-text-color, var(--mat-app-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size);height:var(--mat-badge-legacy-small-size-container-size);min-width:var(--mat-badge-small-size-container-size);min-height:var(--mat-badge-small-size-container-size);line-height:var(--mat-badge-small-size-line-height);padding:var(--mat-badge-small-size-container-padding);font-size:var(--mat-badge-small-size-text-size);margin:var(--mat-badge-small-size-container-offset)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size);height:var(--mat-badge-legacy-container-size);min-width:var(--mat-badge-container-size);min-height:var(--mat-badge-container-size);line-height:var(--mat-badge-line-height);padding:var(--mat-badge-container-padding);font-size:var(--mat-badge-text-size, var(--mat-app-label-small-size));margin:var(--mat-badge-container-offset)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size);height:var(--mat-badge-legacy-large-size-container-size);min-width:var(--mat-badge-large-size-container-size);min-height:var(--mat-badge-large-size-container-size);line-height:var(--mat-badge-large-size-line-height);padding:var(--mat-badge-large-size-container-padding);font-size:var(--mat-badge-large-size-text-size, var(--mat-app-label-small-size));margin:var(--mat-badge-large-size-container-offset)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset)}"],encapsulation:2,changeDetection:0})}}return t})(),jt=(()=>{class t{get color(){return this._color}set color(e){this._setColor(e),this._color=e}get content(){return this._content}set content(e){this._updateRenderedContent(e)}get description(){return this._description}set description(e){this._updateDescription(e)}constructor(e,i,n,b,q){this._ngZone=e,this._elementRef=i,this._ariaDescriber=n,this._renderer=b,this._animationMode=q,this._color="primary",this.overlap=!0,this.position="above after",this.size="medium",this._id=Yt++,this._isInitialized=!1,this._interactivityChecker=c(Je),this._document=c(Ye);let J=c(qe);if(!xe.has(J)){xe.add(J);let Te=Ze(Qt,{environmentInjector:c(Re)});J.onDestroy(()=>{xe.delete(J),Te.destroy()})}}isAbove(){return this.position.indexOf("below")===-1}isAfter(){return this.position.indexOf("before")===-1}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){let e=this._renderer.createElement("span"),i="mat-badge-active";return e.setAttribute("id",`mat-badge-content-${this._id}`),e.setAttribute("aria-hidden","true"),e.classList.add(Vt),this._animationMode==="NoopAnimations"&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),typeof requestAnimationFrame=="function"&&this._animationMode!=="NoopAnimations"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(i)})}):e.classList.add(i),e}_updateRenderedContent(e){let i=`${e??""}`.trim();this._isInitialized&&i&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=i),this._content=i}_updateDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!e||this._isHostInteractive())&&this._removeInlineDescription(),this._description=e,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,e):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(e){let i=this._elementRef.nativeElement.classList;i.remove(`mat-badge-${this._color}`),e&&i.add(`mat-badge-${e}`)}_clearExistingBadges(){let e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${Vt}`);for(let i of Array.from(e))i!==this._badgeElement&&i.remove()}static{this.\u0275fac=function(i){return new(i||t)(A(Le),A(Ne),A(Qe),A(Ae),A(Pe,8))}}static{this.\u0275dir=ke({type:t,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(i,n){i&2&&X("mat-badge-overlap",n.overlap)("mat-badge-above",n.isAbove())("mat-badge-below",!n.isAbove())("mat-badge-before",!n.isAfter())("mat-badge-after",n.isAfter())("mat-badge-small",n.size==="small")("mat-badge-medium",n.size==="medium")("mat-badge-large",n.size==="large")("mat-badge-hidden",n.hidden||!n.content)("mat-badge-disabled",n.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",ee],disabled:[2,"matBadgeDisabled","disabled",ee],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",ee]},standalone:!0,features:[Ve]})}}return t})(),Ht=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=we({type:t})}static{this.\u0275inj=Be({imports:[Xe,Ce,Ce]})}}return t})();var Xt={sortBy:se.NEWEST_FIRST,targetFace:null,shootingType:null,distance:null},qt="archery-stats-session-filters",z=(()=>{class t{constructor(){this.store=Ke({name:qt},We(Xt)),it(this.store,{key:qt,storage:nt}),this.sortBy$=this.store.pipe(W(e=>e.sortBy),$({refCount:!0,bufferSize:1})),this.targetFace$=this.store.pipe(W(e=>e.targetFace),$({refCount:!0,bufferSize:1})),this.shootingType$=this.store.pipe(W(e=>e.shootingType),$({refCount:!0,bufferSize:1})),this.distance$=this.store.pipe(W(e=>e.distance),$({refCount:!0,bufferSize:1})),this.filters$=_e({sortBy:this.sortBy$,targetFace:this.targetFace$,shootingType:this.shootingType$,distance:this.distance$}).pipe($({refCount:!0,bufferSize:1})),this.activeFiltersCount$=_e({targetFace:this.targetFace$,shootingType:this.shootingType$,distance:this.distance$}).pipe(Ee(e=>{let i=0;return Object.values(e).forEach(n=>{bt(n)&&i++}),i}),$({refCount:!0,bufferSize:1}))}setSortBy(e){this.store.update(K("sortBy",e))}setTargetFace(e){this.store.update(K("targetFace",e))}setShootingType(e){this.store.update(K("shootingType",e))}setDistance(e){this.store.update(K("distance",e))}getStoreProp(e){return this.store.getValue()[e]}resetAll(){this.store.reset()}resetOnlyFilters(){Ge(()=>{let e=this.getStoreProp("sortBy");this.resetAll(),this.setSortBy(e)})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=$e({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ei(t,l){if(t&1&&(a(0,"mat-radio-button",3),r(1),s()),t&2){let e=l.$implicit,i=m().$implicit;p("value",e[0]),o(),d(" ",i(e[1])," ")}}function ti(t,l){if(t&1&&(h(0,"img",8),a(1,"span",9),r(2),s()),t&2){let e=m().$implicit,i=m();p("ngSrc",i.TargetFaceImgMap.get(i.targetFaceControl.value)),o(2),d(" ",e(i.TargetFaceNameMap.get(i.targetFaceControl.value))," ")}}function ii(t,l){if(t&1&&r(0),t&2){let e=m().$implicit;d(" ",e("generic.all")," ")}}function ni(t,l){if(t&1&&(B(0)(1),a(2,"mat-option",3),h(3,"img",8),a(4,"span",9),r(5),s()()),t&2){let e=l.$implicit,i=m().$implicit,n=m(),b=e[0],q=e[1];o(2),p("value",b),o(),p("ngSrc",n.TargetFaceImgMap.get(b)),o(2),d(" ",i(q)," ")}}function oi(t,l){if(t&1&&(C(0),a(1,"div",1)(2,"label"),r(3),s(),a(4,"mat-radio-group",2)(5,"mat-radio-button",3),r(6),s(),L(7,ei,2,2,"mat-radio-button",3,Z),s()(),a(9,"mat-form-field",4)(10,"mat-label"),r(11),s(),a(12,"mat-select",2)(13,"mat-select-trigger"),g(14,ti,3,2)(15,ii,1,1),s(),a(16,"mat-option",5),r(17),s(),L(18,ni,6,3,"mat-option",3,Z),s()(),a(20,"div",6)(21,"label"),r(22),s(),h(23,"app-small-counter",7),s(),x()),t&2){let e=l.$implicit,i=m();o(3),d(" ",e("form.labels.shootingType"),": "),o(),p("formControl",i.shootingTypeControl),o(),p("value",null),o(),u(e("generic.all")),o(),O(i.ShootingTypeNameMap.entries()),o(4),u(e("form.labels.targetFace")),o(),p("formControl",i.targetFaceControl),o(2),E(i.targetFaceControl.value!=="all"?14:15),o(3),u(e("generic.all")),o(),O(i.TargetFaceNameMap.entries()),o(4),u(e("form.labels.distance")),o(),p("formControl",i.distanceControl)}}var Ut=(()=>{class t{constructor(){this.destroyRef=c(ze),this.sessionFiltersRepo=c(z),this.TargetFaceNameMap=ce,this.TargetFaceImgMap=pe,this.ShootingType=zt,this.ShootingTypeNameMap=me,this.targetFaceControl=new le(this.sessionFiltersRepo.getStoreProp("targetFace")??"all",{nonNullable:!0}),this.shootingTypeControl=new le(this.sessionFiltersRepo.getStoreProp("shootingType")),this.distanceControl=new le(this.sessionFiltersRepo.getStoreProp("distance"),{nonNullable:!0,validators:[Ct.min(0)]}),this.listenToRepoValueChanges(),this.setupControlValueChangeListeners()}listenToRepoValueChanges(){this.sessionFiltersRepo.filters$.pipe(Y(this.destroyRef)).subscribe(({targetFace:e,shootingType:i,distance:n})=>{this.targetFaceControl.setValue(e??"all",{emitEvent:!1}),this.shootingTypeControl.setValue(i,{emitEvent:!1}),this.distanceControl.setValue(n,{emitEvent:!1})})}setupControlValueChangeListeners(){this.targetFaceControl.valueChanges.pipe(Y(this.destroyRef)).subscribe(e=>this.sessionFiltersRepo.setTargetFace(e==="all"?null:e)),this.shootingTypeControl.valueChanges.pipe(Y(this.destroyRef)).subscribe(e=>this.sessionFiltersRepo.setShootingType(e)),this.distanceControl.valueChanges.pipe(Y(this.destroyRef)).subscribe(e=>this.sessionFiltersRepo.setDistance(e===0?null:e))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-session-filters"]],standalone:!0,features:[_],decls:1,vars:0,consts:[[4,"transloco"],[1,"flex-column","margin-bottom-4x"],[3,"formControl"],[3,"value"],[1,"margin-bottom-4x"],["value","all"],[1,"flex-column","align-items-start"],["suffix","m","moreIncrements","",3,"formControl"],["width","30","height","30",2,"vertical-align","middle",3,"ngSrc"],[1,"margin-left-2x"]],template:function(i,n){i&1&&g(0,oi,24,10,"ng-container",0)},dependencies:[Mt,xt,yt,te,F,T,Rt,$t,Et,It,kt,Ft,Tt,Bt,wt,et,Dt],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}}return t})();function ai(t,l){if(t&1){let e=I();C(0),a(1,"h2",1),r(2),s(),a(3,"mat-dialog-content"),h(4,"app-session-filters"),s(),a(5,"mat-dialog-actions")(6,"button",2),r(7),s(),h(8,"span",3),a(9,"button",4),y("click",function(){v(e);let n=m();return S(n.sessionFiltersRepo.resetOnlyFilters())}),r(10),s()(),x()}if(t&2){let e=l.$implicit;o(2),d(" ",e("session.dialogs.filtersDialog.title")," "),o(5),d(" ",e("generic.close")," "),o(3),d(" ",e("generic.resetFilters")," ")}}var Zt=(()=>{class t{constructor(){this.sessionFiltersRepo=c(z)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-session-filters-dialog"]],standalone:!0,features:[_],decls:1,vars:0,consts:[[4,"transloco"],["mat-dialog-title",""],["mat-button","","type","button","mat-dialog-close",""],[1,"spacer"],["mat-button","","color","warn",3,"click"]],template:function(i,n){i&1&&g(0,ai,11,3,"ng-container",0)},dependencies:[F,T,Ut,j,st,rt,mt,lt,w,ie],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}}return t})();function ri(t,l){if(t&1){let e=I();a(0,"button",7),y("click",function(n){return v(e),n.preventDefault(),S(n.stopPropagation())}),a(1,"mat-icon"),r(2),s()()}if(t&2){m();let e=G(4),i=m();p("matMenuTriggerFor",e),o(2),u(i.$icon())}}function li(t,l){if(t&1){let e=I();a(0,"button",8),y("click",function(n){return v(e),n.preventDefault(),S(n.stopPropagation())}),a(1,"mat-icon"),r(2),s()()}if(t&2){m();let e=G(4),i=m();p("matMenuTriggerFor",e),o(2),u(i.$icon())}}function mi(t,l){if(t&1){let e=I();C(0),g(1,ri,3,2,"button",2)(2,li,3,2,"button",3),a(3,"mat-menu",null,0)(5,"button",4),y("click",function(){v(e);let n=m();return S(n.toggleLock())}),a(6,"mat-icon"),r(7),s(),a(8,"span"),r(9),s()(),a(10,"button",5),y("click",function(){v(e);let n=m();return S(n.openEditDialog())}),a(11,"mat-icon"),r(12,"edit"),s(),a(13,"span"),r(14),s()(),a(15,"button",4),y("click",function(){v(e);let n=m();return S(n.deleteSession())}),a(16,"mat-icon",6),r(17,"delete"),s(),a(18,"span"),r(19),s()()(),x()}if(t&2){let e,i=l.$implicit,n=m();o(),E((e=n.$buttonType())==="icon"?1:e==="fab"?2:-1),o(6),u(n.$isSessionLocked()?"lock":"lock_open"),o(2),d(" ",n.$isSessionLocked()?i("session.actions.pressToUnlock"):i("session.actions.pressToLock")," "),o(),p("disabled",n.$isSessionLocked()),o(4),u(i("session.actions.editSession")),o(5),u(i("session.actions.deleteSession"))}}var Gt=(()=>{class t{constructor(){this.sessionsDbService=c(H),this.dialog=c(ae),this.transloco=c(at),this.appStateRepo=c(re),this.soundboard=c(Pt),this.$isSessionLocked=Ue(()=>_t(this.$session().locked)),this.$session=P.required({alias:"session"}),this.$icon=P("more_vert",{alias:"icon-name"}),this.$buttonType=P("icon",{alias:"button-type"}),this.sessionDeleted=Oe()}deleteSession(){this.dialog.open(Nt,{width:"500px",data:{text:this.transloco.translate("session.dialogs.deleteDialog.text")}}).afterClosed().pipe(Ie(1)).subscribe(i=>he(this,null,function*(){i&&(yield this.sessionsDbService.deleteSession(this.$session().id),this.appStateRepo.setLastVisitedSession(null),this.sessionDeleted.emit())}))}openEditDialog(){this.dialog.open(At,{width:"500px",data:{sessionId:this.$session().id}})}toggleLock(){return he(this,null,function*(){this.soundboard.play(this.$isSessionLocked()?"unlock":"lock"),yield this.sessionsDbService.updateSession(this.$session().id,{locked:ht(!this.$isSessionLocked())})})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-session-options-menu"]],inputs:{$session:[1,"session","$session"],$icon:[1,"icon-name","$icon"],$buttonType:[1,"button-type","$buttonType"]},outputs:{sessionDeleted:"sessionDeleted"},standalone:!0,features:[_],decls:1,vars:0,consts:[["menu","matMenu"],[4,"transloco"],["mat-icon-button","","type","button",3,"matMenuTriggerFor"],["mat-fab","","type","button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click","disabled"],["color","warn"],["mat-icon-button","","type","button",3,"click","matMenuTriggerFor"],["mat-fab","","type","button",3,"click","matMenuTriggerFor"]],template:function(i,n){i&1&&g(0,mi,20,6,"ng-container",1)},dependencies:[F,T,w,oe,ne,R,k,fe,ge,de,ue,j],styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}}return t})();function ci(t,l){t&1&&(a(0,"mat-icon"),r(1,"lock"),s())}function pi(t,l){if(t&1&&(C(0),B(1),h(2,"img",1),a(3,"div",2)(4,"span",3),r(5),g(6,ci,2,0,"mat-icon"),s(),a(7,"small"),r(8),M(9,"date"),M(10,"dateDistance"),s(),a(11,"div",4)(12,"small"),r(13),s(),a(14,"small"),r(15,"\u2022"),s(),a(16,"small"),r(17),s(),a(18,"small"),r(19,"\u2022"),s(),a(20,"small"),r(21),M(22,"async"),s(),a(23,"small"),r(24,"\u2022"),s(),a(25,"small"),r(26),s(),a(27,"small"),r(28),M(29,"async"),s(),a(30,"small"),r(31,"\u2022"),s(),a(32,"small"),r(33),s(),a(34,"small"),r(35),M(36,"async"),s()()(),h(37,"app-session-options-menu",5),x()),t&2){let e=l.$implicit,i=m(),n=i.$session();o(2),p("ngSrc",i.TargetFaceImgMap.get(n.targetFace)),o(3),d(" ",n.name," "),o(),E(n.locked?6:-1),o(2),be(" ",He(9,14,n.date,"short")," (",D(10,17,n.date),") "),o(5),u(e(i.ShootingTypeNameMap.get(n.shootingType))),o(4),d("",n.distance,"m"),o(4),be("",e("session.info.rounds"),": ",D(22,19,i.roundCount$),""),o(5),d("",e("session.info.avg"),":"),o(2),u(D(29,21,i.avgScore$)),o(5),d("",e("session.info.total"),":"),o(2),u(D(36,23,i.shotsTotal$)),o(2),p("session",n)}}var Kt=(()=>{class t{constructor(){this.sessionsDbService=c(H),this.TargetFaceNameMap=ce,this.TargetFaceImgMap=pe,this.ShootingTypeNameMap=me,this.roundCount$=De(ft(()=>this.sessionsDbService.getRoundsCountBySessionId(this.$session().id))),this.$session=P.required({alias:"session"}),this.session$=ot(this.$session).pipe($({refCount:!0,bufferSize:1})),this.shotsTotal$=this.session$.pipe(U(e=>this.sessionsDbService.getTotalScoreBySessionID$(e.id))),this.avgScore$=this.session$.pipe(U(e=>this.sessionsDbService.getAverageScoreBySessionID$(e.id)))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-session-list-item"]],inputs:{$session:[1,"session","$session"]},standalone:!0,features:[_],decls:1,vars:0,consts:[[4,"transloco"],["alt","Target face","width","50","height","50",2,"border-radius","5px",3,"ngSrc"],[1,"flex-column","align-items-start"],[1,"session-name"],[1,"session-info"],[3,"session"]],template:function(i,n){i&1&&g(0,pi,38,25,"ng-container",0)},dependencies:[V,F,T,te,Ot,Lt,Gt,R,k],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:50px minmax(0,1fr) 40px;align-items:center;justify-content:flex-start;gap:var(--spacing-3x);padding:var(--spacing-2x)}.session-name[_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:var(--spacing-1x);font-size:1.25em}.session-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;column-gap:var(--spacing-1x)}"],changeDetection:0})}}return t})();function di(t,l){t&1&&(a(0,"mat-icon",5),r(1,"radio_button_checked"),s())}function gi(t,l){t&1&&(a(0,"mat-icon"),r(1,"radio_button_unchecked"),s())}function ui(t,l){if(t&1){let e=I();B(0)(1),a(2,"button",4),y("click",function(){v(e);let n=Se(0),b=m(2);return S(b.sessionFiltersRepo.setSortBy(n))}),g(3,di,2,0,"mat-icon",5)(4,gi,2,0,"mat-icon"),a(5,"span"),r(6),s()()}if(t&2){let e=l.$implicit,i=m().$implicit,n=Se(1),b=ve(e[0]),q=e[1];o(3),E(n===b?3:4),o(3),u(i(q))}}function fi(t,l){if(t&1&&(C(0),B(1),M(2,"async"),a(3,"button",2)(4,"mat-icon"),r(5,"sort"),s(),r(6),s(),a(7,"mat-menu",null,0),L(9,ui,7,3,"button",3,Z),s(),x()),t&2){let e=l.$implicit,i=G(8),n=m();o();let b=ve(D(2,2,n.sessionFiltersRepo.sortBy$));o(2),p("matMenuTriggerFor",i),o(3),d(" ",e(n.SessionSortLabelMap.get(b))," "),o(3),O(n.SessionSortLabelMap.entries())}}var Wt=(()=>{class t{constructor(){this.sessionFiltersRepo=c(z),this.SessionSort=se,this.SessionSortLabelMap=vt}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-session-sort-menu"]],standalone:!0,features:[_],decls:1,vars:0,consts:[["menu","matMenu"],[4,"transloco"],["mat-button","","type","button",3,"matMenuTriggerFor"],["mat-menu-item",""],["mat-menu-item","",3,"click"],["color","primary"]],template:function(i,n){i&1&&g(0,fi,11,5,"ng-container",1)},dependencies:[V,F,T,fe,ge,de,ue,w,ie,R,k],styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}}return t})();var hi=(t,l)=>l.id,_i=t=>["/sessions",t];function bi(t,l){t&1&&h(0,"mat-divider",10)}function vi(t,l){if(t&1&&(a(0,"a",8),h(1,"app-session-list-item",9),M(2,"async"),s(),g(3,bi,1,0,"mat-divider",10)),t&2){let e=l.$implicit,i=l.$index,n=l.$count,b=m(2);p("routerLink",je(7,_i,e.id)),o(),X("active",D(2,5,b.appStateRepo.lastVisitedSession$)===e.id),p("session",e),o(2),E(i!==n-1?3:-1)}}function Si(t,l){if(t&1&&(a(0,"h5",6),r(1),s()),t&2){let e=m().$implicit;o(),d(" ",e("sessionsList.noSessions")," ")}}function Ci(t,l){if(t&1){let e=I();C(0),B(1),M(2,"async"),a(3,"app-page-with-title",1)(4,"button",2),y("click",function(){v(e);let n=m();return S(n.openFiltersDialog())}),a(5,"mat-icon",3),r(6,"tune"),s()(),a(7,"div",4)(8,"div",5),h(9,"app-session-sort-menu"),s(),L(10,vi,4,9,null,null,hi,!1,Si,2,1,"h5",6),M(13,"async"),s(),a(14,"button",7)(15,"mat-icon"),r(16,"add"),s()()(),x()}if(t&2){let e=l.$implicit,i=m(),n=D(2,6,i.sessionFiltersRepo.activeFiltersCount$);o(3),p("page-title",e("sessionsList.title")),o(),p("matTooltip",e("generic.filters"))("matBadge",n)("matBadgeHidden",!n),o(),p("color",n?"primary":""),o(5),O(D(13,8,i.sessions$))}}var ko=(()=>{class t{constructor(){this.dialog=c(ae),this.sessionsDbService=c(H),this.appStateRepo=c(re),this.sessionFiltersRepo=c(z),this.sessions$=this.sessionFiltersRepo.filters$.pipe(U(e=>this.sessionsDbService.getFilteredSessions(Fe({},e))))}openFiltersDialog(){this.dialog.open(Zt,{width:"500px"})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-session-list-page"]],standalone:!0,features:[_],decls:1,vars:0,consts:[[4,"transloco"],[3,"page-title"],["mat-icon-button","","page-action","",3,"click","matTooltip","matBadge","matBadgeHidden"],[3,"color"],[1,"standard-centering"],[1,"margin-bottom-2x"],[1,"text-center","margin-top-6x"],["mat-fab","","routerLink","/create",1,"fab-bottom-right"],[3,"routerLink"],[3,"session"],[1,"margin-y-4x"]],template:function(i,n){i&1&&g(0,Ci,17,10,"ng-container",0)},dependencies:[V,tt,F,T,Kt,St,Wt,w,oe,ne,R,k,ct,j,dt,pt,Ht,jt,ut,gt],styles:["[_nghost-%COMP%]{display:block;padding-bottom:var(--spacing-fab-clearance)}a[_ngcontent-%COMP%]{display:block}app-session-list-item.active[_ngcontent-%COMP%]{color:var(--sys-primary)}mat-divider[_ngcontent-%COMP%]{--mat-divider-color: #2e2e2c}"],changeDetection:0})}}return t})();export{ko as SessionListPageComponent};
