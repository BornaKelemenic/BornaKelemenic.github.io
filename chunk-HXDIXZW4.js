import{a as ge,b as Ce,c as _e,d as he,e as be,f as xe,g as ve,h as Se,i as Me,j as ye,k as Fe,m as Te,n as we,o as Ee,p as Ie,q as Ve}from"./chunk-XS634OQR.js";import{b as Y,d as Z,g as ee}from"./chunk-SUAEE7HY.js";import{c as ne,j as oe,k as re,l as ae,m as me,o as g,q as se,r as le,s as ce,u as y,v as de,x as pe,y as ue,z as fe}from"./chunk-UDHEGLCB.js";import{Q as w,a as D,c as Q,e as $}from"./chunk-LRLKFKMO.js";import{Ka as p,Lb as W,Ma as c,Nb as H,Oa as L,Ra as S,S as j,Sa as O,Ua as B,Va as R,Wa as a,X as x,Xa as r,Y as v,Ya as F,Za as V,Zc as K,_a as N,ab as b,da as _,db as u,ea as h,f as E,fb as d,fd as X,ma as z,na as I,pd as P,qb as s,qd as k,rb as T,sa as A,sb as f,ta as m,uc as J,vd as te,wd as ie,xb as U,yb as M}from"./chunk-BCNRL4NK.js";function Oe(t,i){if(t&1){let o=b();a(0,"button",4),u("click",function(){_(o);let n=d();return h(n.decrement(5))}),a(1,"mat-icon"),s(2,"remove"),r(),s(3,"5 "),r()}if(t&2){let o=d();c("disabled",o.disabled)}}function Be(t,i){t&1&&s(0),t&2&&f(" ",i," ")}function Re(t,i){if(t&1){let o=b();a(0,"button",4),u("click",function(){_(o);let n=d();return h(n.increment(5))}),a(1,"mat-icon"),s(2,"add"),r(),s(3,"5 "),r()}if(t&2){let o=d();c("disabled",o.disabled)}}var De=(()=>{let i=class i{constructor(){this._cdr=x(W),this.value=0,this.disabled=!1,this.$additionalIncrements=I(!1,{alias:"moreIncrements",transform:H}),this.$suffix=I("",{alias:"suffix"}),this.$orientation=I("horizontal",{alias:"orientation"})}get isVertical(){return this.$orientation()==="vertical"}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}writeValue(e){this.setValue(e,!1),this._cdr.markForCheck()}increment(e=1){this.setValue(this.value+e,!0)}decrement(e=1){this.setValue(this.value-e,!0)}setValue(e,n){this.disabled||(this.value=J(e),n&&this.onChange&&(this.onChange(e),this.onTouched()))}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v({type:i,selectors:[["app-small-counter"]],hostVars:2,hostBindings:function(n,l){n&2&&L("vertical",l.isVertical)},inputs:{$additionalIncrements:[1,"moreIncrements","$additionalIncrements"],$suffix:[1,"suffix","$suffix"],$orientation:[1,"orientation","$orientation"]},standalone:!0,features:[U([{provide:ae,useExisting:j(()=>i),multi:!0}]),M],decls:11,vars:6,consts:[["mat-button","","type","button",3,"disabled"],["mat-icon-button","","type","button",3,"click","disabled"],["color","primary"],[1,"value"],["mat-button","","type","button",3,"click","disabled"]],template:function(n,l){if(n&1&&(p(0,Oe,4,1,"button",0),a(1,"button",1),u("click",function(){return l.decrement()}),a(2,"mat-icon",2),s(3,"remove"),r()(),a(4,"span",3),s(5),p(6,Be,1,1),r(),a(7,"button",1),u("click",function(){return l.increment()}),a(8,"mat-icon",2),s(9,"add"),r()(),p(10,Re,4,1,"button",0)),n&2){let C;S(l.$additionalIncrements()?0:-1),m(),c("disabled",l.disabled),m(4),f(" ",l.value," "),m(),S((C=l.$suffix())?6:-1,C),m(),c("disabled",l.disabled),m(3),S(l.$additionalIncrements()?10:-1)}},dependencies:[$,D,Q,ie,te],styles:["[_nghost-%COMP%]{display:inline-flex;flex-direction:row;align-items:center;justify-content:center}[_nghost-%COMP%]   .value[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:var(--spacing-2x);height:36px;font-size:1.25em}.vertical[_nghost-%COMP%]{flex-direction:column-reverse;justify-content:center}.ng-invalid[_nghost-%COMP%]{border:1px solid var(--sys-error)}.ng-invalid[_nghost-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--sys-error)}"],changeDetection:0});let t=i;return t})();function $e(){return new ce({name:new y("",{nonNullable:!0,validators:[g.required]}),targetFace:new y(Me.FULL,{nonNullable:!0,validators:[g.required]}),distance:new y(20,{nonNullable:!0,validators:[g.required,g.min(1)]}),arrowCount:new y(6,{nonNullable:!0,validators:[g.required,g.min(1)]}),shootingType:new y(ve.INDOOR,{nonNullable:!0,validators:[g.required]})})}function Ge(t,i){if(t&1&&(a(0,"mat-error"),s(1),r()),t&2){let o=d().$implicit;m(),f(" ",o("form.validations.fieldRequired")," ")}}function je(t,i){if(t&1&&(a(0,"mat-radio-button",6),s(1),r()),t&2){let o=i.$implicit,e=d().$implicit;c("value",o[0]),m(),f(" ",e(o[1])," ")}}function ze(t,i){if(t&1&&(a(0,"mat-option",6),s(1),r()),t&2){let o=i.$implicit,e=d().$implicit;c("value",o[0]),m(),f(" ",e(o[1])," ")}}function Ae(t,i){if(t&1){let o=b();V(0),a(1,"form",1),u("ngSubmit",function(){_(o);let n=d();return h(n.submitForm())}),a(2,"mat-form-field",2)(3,"mat-label"),s(4),r(),F(5,"input",3),p(6,Ge,2,1,"mat-error"),r(),a(7,"div",4)(8,"label"),s(9),r(),a(10,"mat-radio-group",5),B(11,je,2,2,"mat-radio-button",6,O),r()(),a(13,"div",7)(14,"label"),s(15),r(),F(16,"app-small-counter",8),r(),a(17,"div",7)(18,"label"),s(19),r(),F(20,"app-small-counter",9),r(),a(21,"div",10)(22,"mat-form-field",11)(23,"mat-label"),s(24),r(),a(25,"mat-select",12),B(26,ze,2,2,"mat-option",6,O),r()(),F(28,"img",13),r(),a(29,"button",14),s(30),r()(),N()}if(t&2){let o=i.$implicit,e=d();m(),c("formGroup",e.form),m(3),T(o("form.labels.name")),m(2),S(e.form.controls.name.hasError("required")?6:-1),m(3),f(" ",o("form.labels.shootingType")," "),m(2),R(e.ShootingTypeNameMap.entries()),m(4),T(o("form.labels.distance")),m(4),T(o("form.labels.arrowCount")),m(5),T(o("form.labels.targetFace")),m(2),R(e.TargetFaceNameMap.entries()),m(2),c("src",e.TargetFaceImgMap.get(e.form.controls.targetFace.value),A),m(),c("disabled",e.form.invalid),m(),f(" ",o("form.buttons.createSession")," ")}}var Pe=(()=>{let i=class i{constructor(){this.sessionsDbService=x(oe),this.ShootingTypeNameMap=Se,this.TargetFaceNameMap=ye,this.TargetFaceImgMap=Fe,this.form=$e(),this.formSubmitted=z(),this.initializeFormWithPreviouslyEnteredValues(),this.initSessionName()}initializeFormWithPreviouslyEnteredValues(){return E(this,null,function*(){let e=yield this.sessionsDbService.getLatestSession();if(!e)return;let n={},{shootingType:l,targetFace:C,distance:q,arrowCount:G}=e;w(l)&&(n.shootingType=l),w(C)&&(n.targetFace=C),w(q)&&(n.distance=q),w(G)&&(n.arrowCount=G),this.form.patchValue(n,{emitEvent:!1})})}initSessionName(){return E(this,null,function*(){let e=yield ne.sessions.count();e&&this.form.controls.name.setValue(`Session ${e+1}`)})}submitForm(){return E(this,null,function*(){if(this.form.invalid)return;let e=this.form.getRawValue(),n=yield this.sessionsDbService.addSession(e);this.formSubmitted.emit(n)})}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v({type:i,selectors:[["app-create-session-form"]],outputs:{formSubmitted:"formSubmitted"},standalone:!0,features:[M],decls:1,vars:0,consts:[[4,"transloco"],[3,"ngSubmit","formGroup"],[1,"margin-bottom-4x"],["matInput","","formControlName","name"],[1,"flex-column","margin-bottom-4x"],["formControlName","shootingType"],[3,"value"],[1,"flex-column","align-items-start","margin-bottom-4x"],["formControlName","distance","suffix","m","moreIncrements",""],["formControlName","arrowCount"],[1,"flex-row","align-items-center","margin-bottom-4x"],[1,"no-bottom-space"],["formControlName","targetFace"],["width","56","height","56",1,"margin-left-1x",2,"border-radius","5px",3,"src"],["mat-flat-button","","type","submit",1,"margin-top-6x",3,"disabled"]],template:function(n,l){n&1&&p(0,Ae,31,10,"ng-container",0)},dependencies:[k,P,fe,de,me,se,le,pe,ue,De,he,_e,ge,Ce,we,Te,$,D,Ve,Ee,Ie,xe,be,K],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0});let t=i;return t})();function Le(t,i){if(t&1){let o=b();V(0),a(1,"app-page-with-title",1)(2,"mat-card",2)(3,"mat-card-content")(4,"app-create-session-form",3),u("formSubmitted",function(n){_(o);let l=d();return h(l.onFormDone(n))}),r()()()(),N()}if(t&2){let o=i.$implicit;m(),c("page-title",o("createSession.title"))}}var qt=(()=>{let i=class i{constructor(){this.router=x(X)}onFormDone(e){this.router.navigate(["/sessions",e])}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v({type:i,selectors:[["app-create-session-page"]],standalone:!0,features:[M],decls:1,vars:0,consts:[[4,"transloco"],["page-back-link","/",3,"page-title"],[1,"standard-centering"],[3,"formSubmitted"]],template:function(n,l){n&1&&p(0,Le,5,1,"ng-container",0)},dependencies:[k,P,re,Pe,ee,Y,Z],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let t=i;return t})();export{qt as CreateSessionPageComponent};
