import{b as de,c as ge,d as ve,e as ye,g as Ee}from"./chunk-TXHZY5L4.js";import"./chunk-NDD4UQO5.js";import{b as _e,d as xe,e as he}from"./chunk-BRDO3YVT.js";import"./chunk-K5I6X2JS.js";import{i as Me,j as Ce,k as be,l as Te}from"./chunk-G4PJ3TDV.js";import{f as ie,h as ne,i as oe,k as se,l as ce,m as pe}from"./chunk-DJSZ42ZW.js";import{a as ue,h as R,i as fe,j as O,k as Se}from"./chunk-XZE2WNHA.js";import{a as k,b as ae,e as w}from"./chunk-UCCBCOEJ.js";import{Ab as ee,Bb as c,Cb as l,Db as te,K as D,Ka as S,Ma as d,N as F,Oa as J,Ra as B,Sa as U,T as q,Ua as L,Va as P,Wa as s,X as g,Xa as o,Y as _,Ya as x,Za as h,_a as v,_b as C,ab as X,da as Q,db as Y,dc as re,ea as G,fb as p,fd as me,ld as le,na as H,od as b,p as K,pb as Z,pd as T,qb as r,rb as y,sb as u,ta as a,tb as j,u as W,ub as $,ud as E,vb as A,vd as I,wb as V,yb as M}from"./chunk-LJDQ7VNH.js";var Pe={sortBy:R.NEWEST_FIRST},Ie="archery-stats-session-filters",N=(()=>{let e=class e{constructor(){this.store=ie({name:Ie},se(Pe)),ce(this.store,{key:Ie,storage:pe}),this.sortBy$=this.store.pipe(oe(i=>i.sortBy),D({refCount:!0,bufferSize:1}))}setSortBy(i){this.store.update(ne("sortBy",i))}getStoreProp(i){return this.store.getValue()[i]}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ke(t,e){t&1&&(s(0,"mat-icon"),r(1,"lock"),o())}function we(t,e){if(t&1&&(h(0),$(1),x(2,"img",1),s(3,"div",2)(4,"span",3),r(5),S(6,ke,2,0,"mat-icon"),o(),s(7,"small"),r(8),c(9,"date"),c(10,"dateDistance"),o(),s(11,"div",4)(12,"small"),r(13),o(),s(14,"small"),r(15,"\u2022"),o(),s(16,"small"),r(17),o(),s(18,"small"),r(19,"\u2022"),o(),s(20,"small"),r(21),c(22,"async"),o(),s(23,"small"),r(24,"\u2022"),o(),s(25,"small"),r(26),o(),s(27,"small"),r(28),c(29,"async"),o(),s(30,"small"),r(31,"\u2022"),o(),s(32,"small"),r(33),o(),s(34,"small"),r(35),c(36,"async"),o()()(),x(37,"app-session-options-menu",5),v()),t&2){let m=e.$implicit,i=p(),n=i.$session();a(2),d("ngSrc",i.TargetFaceImgMap.get(n.targetFace)),a(3),u(" ",n.name," "),a(),B(n.locked?6:-1),a(2),j(" ",te(9,14,n.date,"short")," (",l(10,17,n.date),") "),a(5),y(m(i.ShootingTypeNameMap.get(n.shootingType))),a(4),u("",n.distance,"m"),a(4),j("",m("session.info.rounds"),": ",l(22,19,i.roundCount$),""),a(5),u("",m("session.info.avg"),":"),a(2),y(l(29,21,i.avgScore$)),a(5),u("",m("session.info.total"),":"),a(2),y(l(36,23,i.shotsTotal$)),a(2),d("session",n)}}var De=(()=>{let e=class e{constructor(){this.sessionsDbService=g(O),this.TargetFaceNameMap=xe,this.TargetFaceImgMap=he,this.ShootingTypeNameMap=_e,this.roundCount$=K(ue(()=>this.sessionsDbService.getRoundsCountBySessionId(this.$session().id))),this.$session=H.required({alias:"session"}),this.session$=le(this.$session).pipe(D({refCount:!0,bufferSize:1})),this.shotsTotal$=this.session$.pipe(F(i=>this.sessionsDbService.getTotalScoreBySessionID$(i.id))),this.avgScore$=this.session$.pipe(F(i=>this.sessionsDbService.getAverageScoreBySessionID$(i.id)))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=_({type:e,selectors:[["app-session-list-item"]],inputs:{$session:[1,"session","$session"]},standalone:!0,features:[M],decls:1,vars:0,consts:[[4,"transloco"],["alt","Target face","width","50","height","50",2,"border-radius","5px",3,"ngSrc"],[1,"flex-column","align-items-start"],[1,"session-name"],[1,"session-info"],[3,"session"]],template:function(n,f){n&1&&S(0,we,38,25,"ng-container",0)},dependencies:[C,T,b,re,ye,ve,Ee,I,E],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:50px minmax(0,1fr) 40px;align-items:center;justify-content:flex-start;gap:var(--spacing-3x);padding:var(--spacing-2x);background-color:var(--mdc-outlined-card-container-color);border-style:solid;border-radius:var(--mdc-outlined-card-container-shape);border-width:var(--mdc-outlined-card-outline-width);border-color:var(--mdc-outlined-card-outline-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.session-name[_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:var(--spacing-1x);font-size:1.25em}.session-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;column-gap:var(--spacing-1x)}"],changeDetection:0});let t=e;return t})();function Oe(t,e){t&1&&(s(0,"mat-icon",5),r(1,"radio_button_checked"),o())}function Ne(t,e){t&1&&(s(0,"mat-icon"),r(1,"radio_button_unchecked"),o())}function je(t,e){if(t&1){let m=X();$(0)(1),s(2,"button",4),Y("click",function(){Q(m);let n=V(0),f=p(2);return G(f.sessionFiltersRepo.setSortBy(n))}),S(3,Oe,2,0,"mat-icon",5)(4,Ne,2,0,"mat-icon"),s(5,"span"),r(6),o()()}if(t&2){let m=e.$implicit,i=p().$implicit,n=V(1),f=A(m[0]),Le=m[1];a(3),B(n===f?3:4),a(3),y(i(Le))}}function Ae(t,e){if(t&1&&(h(0),$(1),c(2,"async"),s(3,"button",2)(4,"mat-icon"),r(5,"sort"),o(),r(6),o(),s(7,"mat-menu",null,0),L(9,je,7,3,"button",3,U),o(),v()),t&2){let m=e.$implicit,i=Z(8),n=p();a();let f=A(l(2,2,n.sessionFiltersRepo.sortBy$));a(2),d("matMenuTriggerFor",i),a(3),u(" ",m(n.SessionSortLabelMap.get(f))," "),a(3),P(n.SessionSortLabelMap.entries())}}var Be=(()=>{let e=class e{constructor(){this.sessionFiltersRepo=g(N),this.SessionSort=R,this.SessionSortLabelMap=fe}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=_({type:e,selectors:[["app-session-sort-menu"]],standalone:!0,features:[M],decls:1,vars:0,consts:[["menu","matMenu"],[4,"transloco"],["mat-button","","type","button",3,"matMenuTriggerFor"],["mat-menu-item",""],["mat-menu-item","",3,"click"],["color","primary"]],template:function(n,f){n&1&&S(0,Ae,11,5,"ng-container",1)},dependencies:[C,T,b,Te,Ce,Me,be,w,k,I,E],styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0});let t=e;return t})();var Ve=(t,e)=>e.id,ze=t=>["/sessions",t];function Ke(t,e){if(t&1&&(s(0,"a",5),x(1,"app-session-list-item",8),c(2,"async"),o()),t&2){let m=e.$implicit,i=p(2);d("routerLink",ee(6,ze,m.id)),a(),J("active",l(2,4,i.appStateRepo.lastVisitedSession$)===m.id),d("session",m)}}function We(t,e){if(t&1&&(s(0,"h5",6),r(1),o()),t&2){let m=p().$implicit;a(),u(" ",m("sessionsList.noSessions")," ")}}function qe(t,e){if(t&1&&(h(0),s(1,"app-page-with-title",1)(2,"button",2)(3,"mat-icon"),r(4,"filter_alt"),o(),r(5," Filters "),o(),s(6,"div",3)(7,"div",4),x(8,"app-session-sort-menu"),o(),L(9,Ke,3,8,"a",5,Ve,!1,We,2,1,"h5",6),c(12,"async"),o(),s(13,"button",7)(14,"mat-icon"),r(15,"add"),o()()(),v()),t&2){let m=e.$implicit,i=p();a(),d("page-title",m("sessionsList.title")),a(8),P(l(12,2,i.sessions$))}}var Vt=(()=>{let e=class e{constructor(){this.sessionsDbService=g(O),this.appStateRepo=g(ge),this.sessionFiltersRepo=g(N),this.sessions$=W({sortBy:this.sessionFiltersRepo.sortBy$}).pipe(F(({sortBy:i})=>this.sessionsDbService.getFilteredSessions({sortBy:i})))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=_({type:e,selectors:[["app-session-list-page"]],standalone:!0,features:[M],decls:1,vars:0,consts:[[4,"transloco"],[3,"page-title"],["mat-button","","page-action",""],[1,"standard-centering"],[1,"margin-bottom-2x"],[3,"routerLink"],[1,"text-center","margin-top-6x"],["mat-fab","","routerLink","/create",1,"fab-bottom-right"],[3,"session"]],template:function(n,f){n&1&&S(0,qe,16,4,"ng-container",0)},dependencies:[C,me,T,b,De,Se,Be,w,k,ae,I,E,de],styles:["[_nghost-%COMP%]{display:block;padding-bottom:var(--spacing-fab-clearance)}a[_ngcontent-%COMP%]{display:block}a[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:var(--spacing-4x)}app-session-list-item.active[_ngcontent-%COMP%]{color:var(--sys-on-primary-container);background-color:var(--sys-primary-container)}"],changeDetection:0});let t=e;return t})();export{Vt as SessionListPageComponent};
