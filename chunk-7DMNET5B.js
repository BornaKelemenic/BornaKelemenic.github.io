import{a as ie,b as oe,c as ne,d as re,e as ae,f as me,g as se,h as le,j as ce,k as de,l as ue,m as fe,n as ge,o as Ce,q as Se,r as _e}from"./chunk-ZCEIQ5PE.js";import{e as G}from"./chunk-S64JEGRV.js";import{g as A}from"./chunk-JL3X65JT.js";import{t as S}from"./chunk-HNB34FLC.js";import{d as pe}from"./chunk-O3DFFZMN.js";import"./chunk-BXAUEGAT.js";import{b as z,d as W,h as j}from"./chunk-25AJH2W7.js";import{a as H}from"./chunk-KVEUNRWO.js";import{c as U,g as J,i as p,k as K,l as Q,m as X,o as u,p as Y,r as Z,s as ee,t as te}from"./chunk-IXICGOBR.js";import{o as O,r as B}from"./chunk-JYPJOC3Y.js";import{$a as c,Da as f,Gc as L,Ia as l,Na as k,Oa as D,Qa as I,Qc as N,R as x,Ra as V,Rc as E,Sa as r,Ta as n,Ua as g,V as b,Va as M,W as h,Wa as y,Ya as T,_a as w,ca as $,kb as a,lb as C,mb as d,na as q,oa as o,xa as F}from"./chunk-ORNXUK3Z.js";import{f as v}from"./chunk-EQDQRRRY.js";function ve(){return new X({name:new u("",{nonNullable:!0,validators:[p.required]}),targetFace:new u(fe.FULL,{nonNullable:!0,validators:[p.required]}),distance:new u(20,{nonNullable:!0,validators:[p.required,p.min(1)]}),arrowCount:new u(6,{nonNullable:!0,validators:[p.required,p.min(1)]}),shootingType:new u(de.INDOOR,{nonNullable:!0,validators:[p.required]})})}function Fe(i,m){if(i&1&&(r(0,"mat-error"),a(1),n()),i&2){let e=c().$implicit;o(),d(" ",e("form.validations.fieldRequired")," ")}}function Me(i,m){if(i&1&&(r(0,"mat-radio-button",6),a(1),n()),i&2){let e=m.$implicit,t=c().$implicit;l("value",e[0]),o(),d(" ",t(e[1])," ")}}function ye(i,m){if(i&1&&(r(0,"mat-option",6),a(1),n()),i&2){let e=m.$implicit,t=c().$implicit;l("value",e[0]),o(),d(" ",t(e[1])," ")}}function Te(i,m){if(i&1){let e=T();M(0),r(1,"form",1),w("ngSubmit",function(){b(e);let s=c();return h(s.submitForm())}),r(2,"mat-form-field",2)(3,"mat-label"),a(4),n(),g(5,"input",3),f(6,Fe,2,1,"mat-error"),n(),r(7,"div",4)(8,"label"),a(9),n(),r(10,"mat-radio-group",5),I(11,Me,2,2,"mat-radio-button",6,D),n()(),r(13,"div",7)(14,"label"),a(15),n(),g(16,"app-small-counter",8),n(),r(17,"div",7)(18,"label"),a(19),n(),g(20,"app-small-counter",9),n(),r(21,"div",10)(22,"mat-form-field",11)(23,"mat-label"),a(24),n(),r(25,"mat-select",12),I(26,ye,2,2,"mat-option",6,D),n()(),g(28,"img",13),n(),r(29,"button",14),a(30),n()(),y()}if(i&2){let e=m.$implicit,t=c();o(),l("formGroup",t.form),o(3),C(e("form.labels.name")),o(2),k(t.form.controls.name.hasError("required")?6:-1),o(3),d(" ",e("form.labels.shootingType")," "),o(2),V(t.ShootingTypeNameMap.entries()),o(4),C(e("form.labels.distance")),o(4),C(e("form.labels.arrowCount")),o(5),C(e("form.labels.targetFace")),o(2),V(t.TargetFaceNameMap.entries()),o(2),l("src",t.TargetFaceImgMap.get(t.form.controls.targetFace.value),q),o(),l("disabled",t.form.invalid),o(),d(" ",e("form.buttons.createSession")," ")}}var xe=(()=>{class i{constructor(){this.sessionsDbService=x(A),this.ShootingTypeNameMap=ue,this.TargetFaceNameMap=ge,this.TargetFaceImgMap=Ce,this.form=ve(),this.formSubmitted=$(),this.initializeFormWithPreviouslyEnteredValues(),this.initSessionName()}initializeFormWithPreviouslyEnteredValues(){return v(this,null,function*(){let e=yield this.sessionsDbService.getLatestSession();if(!e)return;let t={},{shootingType:s,targetFace:_,distance:P,arrowCount:R}=e;S(s)&&(t.shootingType=s),S(_)&&(t.targetFace=_),S(P)&&(t.distance=P),S(R)&&(t.arrowCount=R),this.form.patchValue(t,{emitEvent:!1})})}initSessionName(){return v(this,null,function*(){let e=yield U.sessions.count();e&&this.form.controls.name.setValue(`Session ${e+1}`)})}submitForm(){return v(this,null,function*(){if(this.form.invalid)return;let e=this.form.getRawValue(),t=yield this.sessionsDbService.addSession(e);this.formSubmitted.emit(t)})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=F({type:i,selectors:[["app-create-session-form"]],outputs:{formSubmitted:"formSubmitted"},decls:1,vars:0,consts:[[4,"transloco"],[3,"ngSubmit","formGroup"],[1,"margin-bottom-4x"],["matInput","","formControlName","name"],[1,"flex-column","margin-bottom-4x"],["formControlName","shootingType"],[3,"value"],[1,"flex-column","align-items-start","margin-bottom-4x"],["formControlName","distance","suffix","m","moreIncrements",""],["formControlName","arrowCount"],[1,"flex-row","align-items-center","margin-bottom-4x"],[1,"no-bottom-space"],["formControlName","targetFace"],["width","56","height","56",1,"margin-left-1x",2,"border-radius","5px",3,"src"],["mat-flat-button","","type","submit",1,"margin-top-6x",3,"disabled"]],template:function(t,s){t&1&&f(0,Te,31,10,"ng-container",0)},dependencies:[E,N,te,Y,J,K,Q,Z,ee,pe,re,ne,ie,oe,_e,Se,B,O,se,ae,me,ce,le,G],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}}return i})();function we(i,m){if(i&1){let e=T();M(0),r(1,"app-page-with-title",1)(2,"mat-card",2)(3,"mat-card-content")(4,"app-create-session-form",3),w("formSubmitted",function(s){b(e);let _=c();return h(_.onFormDone(s))}),n()()()(),y()}if(i&2){let e=m.$implicit;o(),l("page-title",e("createSession.title"))}}var pt=(()=>{class i{constructor(){this.router=x(L)}onFormDone(e){this.router.navigate(["/sessions",e])}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=F({type:i,selectors:[["app-create-session-page"]],decls:1,vars:0,consts:[[4,"transloco"],["page-back-link","/",3,"page-title"],[1,"standard-centering"],[3,"formSubmitted"]],template:function(t,s){t&1&&f(0,we,5,1,"ng-container",0)},dependencies:[E,N,H,xe,j,z,W],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}}return i})();export{pt as CreateSessionPageComponent};
