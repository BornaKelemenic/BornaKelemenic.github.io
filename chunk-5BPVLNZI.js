import{a as me,b as se,c as le,d as pe,e as ce,f as de,g as fe,h as ue,j as ge,k as _e,l as Se,m as be,n as ve,o as xe,q as he,r as ye}from"./chunk-44HE64SY.js";import{e as L}from"./chunk-FTTXTO3X.js";import{g as X}from"./chunk-QTGRJOY7.js";import{c as C}from"./chunk-TUX3VW3M.js";import{d as Ce}from"./chunk-SRBIYDI5.js";import"./chunk-NGGUKZKR.js";import{b as U,d as A,h as H}from"./chunk-OWY6WM33.js";import{a as Y}from"./chunk-YB7CCIRZ.js";import{a as J,b as K,e as Q,i as Z,k as c,m as ee,n as te,o as ie,q as f,r as oe,t as ne,u as re,v as ae}from"./chunk-AG3FRLJI.js";import{k as W,n as z}from"./chunk-3AIAIFAZ.js";import{Bb as G,Ea as R,Fa as k,Ga as M,Ia as F,Ic as j,Ja as T,Ka as l,La as m,Ma as r,Na as _,Oa as w,Pa as N,Ra as E,S as b,Sc as D,Ta as I,Tc as V,Ua as p,V as v,W as x,gb as s,ha as P,hb as g,ia as n,ib as d,qa as h,wa as y}from"./chunk-6ZKZZP75.js";import{f as S}from"./chunk-EQDQRRRY.js";function Me(){return new ie({name:new f("",{nonNullable:!0,validators:[c.required]}),targetFace:new f(be.FULL,{nonNullable:!0,validators:[c.required]}),distance:new f(20,{nonNullable:!0,validators:[c.required,c.min(1)]}),arrowCount:new f(6,{nonNullable:!0,validators:[c.required,c.min(1)]}),shootingType:new f(_e.INDOOR,{nonNullable:!0,validators:[c.required]}),bowType:new f(J.LONGBOW,{nonNullable:!0,validators:[c.required]})})}function Ne(t,i){if(t&1&&(m(0,"mat-error"),s(1),r()),t&2){let o=p().$implicit;n(),d(" ",o("form.validations.fieldRequired")," ")}}function Ee(t,i){if(t&1&&(m(0,"mat-radio-button",6),s(1),r()),t&2){let o=i.$implicit,e=p().$implicit;l("value",o[0]),n(),d(" ",e(o[1])," ")}}function Ie(t,i){if(t&1&&(m(0,"mat-option",6),s(1),r()),t&2){let o=i.$implicit,e=p().$implicit;l("value",o[0]),n(),d(" ",e(o[1])," ")}}function De(t,i){if(t&1&&(m(0,"mat-option",6),s(1),r()),t&2){let o=i.$implicit,e=p().$implicit;l("value",o[0]),n(),d(" ",e(o[1])," ")}}function Ve(t,i){if(t&1){let o=E();w(0),m(1,"form",1),I("ngSubmit",function(){v(o);let a=p();return x(a.submitForm())}),m(2,"mat-form-field",2)(3,"mat-label"),s(4),r(),_(5,"input",3),R(6,Ne,2,1,"mat-error"),r(),m(7,"div",4)(8,"label"),s(9),r(),m(10,"mat-radio-group",5),F(11,Ee,2,2,"mat-radio-button",6,M),r()(),m(13,"div",7)(14,"label"),s(15),r(),_(16,"app-small-counter",8),r(),m(17,"div",7)(18,"label"),s(19),r(),_(20,"app-small-counter",9),r(),m(21,"div",10)(22,"mat-form-field",11)(23,"mat-label"),s(24),r(),m(25,"mat-select",12),F(26,Ie,2,2,"mat-option",6,M),r()(),_(28,"img",13),r(),m(29,"div",2)(30,"mat-form-field")(31,"mat-label"),s(32),r(),m(33,"mat-select",14),F(34,De,2,2,"mat-option",6,M),r()()(),m(36,"button",15),s(37),r()(),N()}if(t&2){let o=i.$implicit,e=p();n(),l("formGroup",e.form),n(3),g(o("form.labels.name")),n(2),k(e.form.controls.name.hasError("required")?6:-1),n(3),d(" ",o("form.labels.shootingType")," "),n(2),T(e.ShootingTypeNameMap.entries()),n(4),g(o("form.labels.distance")),n(4),g(o("form.labels.arrowCount")),n(5),g(o("form.labels.targetFace")),n(2),T(e.TargetFaceNameMap.entries()),n(2),l("src",e.TargetFaceImgMap.get(e.form.controls.targetFace.value),P),n(4),g(o("form.labels.bowType")),n(2),T(e.BowTypeNameMap.entries()),n(2),l("disabled",e.form.invalid),n(),d(" ",o("form.buttons.createSession")," ")}}var Fe=(()=>{let i=class i{constructor(){this.sessionsDbService=b(X),this.ShootingTypeNameMap=Se,this.TargetFaceNameMap=ve,this.TargetFaceImgMap=xe,this.BowTypeNameMap=K,this.form=Me(),this.formSubmitted=G(),this.initializeFormWithPreviouslyEnteredValues(),this.initSessionName()}initializeFormWithPreviouslyEnteredValues(){return S(this,null,function*(){let e=yield this.sessionsDbService.getLatestSession();if(!e)return;let a={},{shootingType:u,targetFace:B,distance:$,arrowCount:q,bowType:O}=e;C(u)&&(a.shootingType=u),C(B)&&(a.targetFace=B),C($)&&(a.distance=$),C(q)&&(a.arrowCount=q),C(O)&&(a.bowType=O),this.form.patchValue(a,{emitEvent:!1})})}initSessionName(){return S(this,null,function*(){let e=yield Q.sessions.count();e&&this.form.controls.name.setValue(`Session ${e+1}`)})}submitForm(){return S(this,null,function*(){if(this.form.invalid)return;let e=this.form.getRawValue(),a=yield this.sessionsDbService.addSession(e);this.formSubmitted.emit(a)})}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=h({type:i,selectors:[["app-create-session-form"]],outputs:{formSubmitted:"formSubmitted"},decls:1,vars:0,consts:[[4,"transloco"],[3,"ngSubmit","formGroup"],[1,"margin-bottom-4x"],["matInput","","formControlName","name"],[1,"flex-column","margin-bottom-4x"],["formControlName","shootingType"],[3,"value"],[1,"flex-column","align-items-start","margin-bottom-4x"],["formControlName","distance","suffix","m","moreIncrements",""],["formControlName","arrowCount"],[1,"flex-row","align-items-center","margin-bottom-4x"],[1,"no-bottom-space"],["formControlName","targetFace"],["width","56","height","56",1,"margin-left-1x",2,"border-radius","5px",3,"src"],["formControlName","bowType"],["mat-flat-button","","type","submit",1,"margin-top-6x",3,"disabled"]],template:function(a,u){a&1&&y(0,Ve,38,11,"ng-container",0)},dependencies:[V,D,ae,oe,Z,ee,te,ne,re,Ce,pe,le,me,se,ye,he,z,W,fe,ce,de,ge,ue,L],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0});let t=i;return t})();function Be(t,i){if(t&1){let o=E();w(0),m(1,"app-page-with-title",1)(2,"mat-card",2)(3,"mat-card-content")(4,"app-create-session-form",3),I("formSubmitted",function(a){v(o);let u=p();return x(u.onFormDone(a))}),r()()()(),N()}if(t&2){let o=i.$implicit;n(),l("page-title",o("createSession.title"))}}var bt=(()=>{let i=class i{constructor(){this.router=b(j)}onFormDone(e){this.router.navigate(["/sessions",e])}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=h({type:i,selectors:[["app-create-session-page"]],decls:1,vars:0,consts:[[4,"transloco"],["page-back-link","/",3,"page-title"],[1,"standard-centering"],[3,"formSubmitted"]],template:function(a,u){a&1&&y(0,Be,5,1,"ng-container",0)},dependencies:[V,D,Y,Fe,H,U,A],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let t=i;return t})();export{bt as CreateSessionPageComponent};
