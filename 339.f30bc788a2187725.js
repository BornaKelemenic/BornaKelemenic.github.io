"use strict";(self.webpackChunkarchery_stats=self.webpackChunkarchery_stats||[]).push([[339],{6885:(O,K,d)=>{d.d(K,{a:()=>c,b:()=>g});var c=(()=>((c=c||{}).OLDEST_FIRST="oldest_first",c.NEWEST_FIRST="newest_first",c.HIGHEST_SUM="highest_sum",c.LOWEST_SUM="lowest_sum",c.HIGHEST_AVERAGE="highest_average",c.LOWEST_AVERAGE="lowest_average",c.MOST_ENTRIES="most_entries",c))();const g={[c.OLDEST_FIRST]:"Oldest first",[c.NEWEST_FIRST]:"Newest first",[c.HIGHEST_SUM]:"Highest total first",[c.LOWEST_SUM]:"Lowest total first",[c.HIGHEST_AVERAGE]:"Highest average first",[c.LOWEST_AVERAGE]:"Lowest average first",[c.MOST_ENTRIES]:"Most entries"}},5528:(O,K,d)=>{d.d(K,{E2:()=>E,P1:()=>S,iA:()=>M,pK:()=>g});var c=d(6276);function g(l){return l.entries.map(h=>h.shots.map(y=>y.value))}function E(l){return(0,c.Iz)(l.entries.map(h=>h.shots).flat().map(h=>h.value))}function S(l){const h=l.entries.map(y=>y.shots).flat().map(y=>y.value);return 0===h.length?0:(0,c.Y8)(h)}function M(l){const y=l.map(_=>_.shots.map(T=>T.value)).flat().reduce((_,T)=>(_.set(T,(_.get(T)||0)+1),_),new Map(Array.from({length:11},(_,T)=>[T,0]))),D=y.values();return{asMap:y,asArray:Array.from(D)}}},7697:(O,K,d)=>{d.d(K,{H:()=>he});var c=d(1331),g=d(9635),E=d(1884),S=d(4004),M=d(3900);function l(t,n){const e={},i=[];for(const s of t){const r=s[n];i.push(r),e[r]=s}return{ids:i,asObject:e}}function _(t,n){return t.config[n.idKeyRef]}class T{constructor(n){this.idKeyRef="idKey",this.entitiesKey=n.entitiesKey,this.idsKey=n.idsKey,this.idKeyRef=n.idKeyRef}}function $(t){const n=t?`idKey${(0,c.kC)(t)}`:"idKey",e=new T({entitiesKey:t?`${t}Entities`:"entities",idsKey:t?`${t}Ids`:"ids",idKeyRef:n});return{[`${t}EntitiesRef`]:e,[`with${(0,c.kC)(t)}Entities`]:function i(s){let r={},o=[];const u=s?.idKey||"id";return s?.initialValue&&({ids:o,asObject:r}=l(s.initialValue,u)),{props:{[e.entitiesKey]:r,[e.idsKey]:o},config:{[n]:u}}}}}const{withEntities:z,EntitiesRef:a}=$("");function B(t,n={}){return function(e,i){const{prepend:s=!1,ref:r=a}=n,{entitiesKey:o,idsKey:u}=r,f=_(i,r),p=(0,c.Eq)(t);if(!p.length)return e;(0,c.r8)()&&(function Y(t,n,e,i){t.forEach(s=>{const r=s[n];if(e[i][r])throw Error(`Entity already exists. ${n} ${r}`)})}(p,f,e,o),function Q(t,n){const e=new Set;t.forEach(i=>{const s=i[n];if(e.has(s))throw Error(`Duplicate entity id provided. ${n} ${s}`);e.add(s)})}(p,f));const{ids:v,asObject:A}=l(p,f);return{...e,[o]:{...e[o],...A},[u]:s?[...v,...e[u]]:[...e[u],...v]}}}function H(t,n={}){return function(e){const{ref:{entitiesKey:i}=a}=n;return e[i][t]}}function L(t,n={}){return function(e){const{ref:{entitiesKey:i}=a}=n;return Reflect.has(e[i],t)}}function V(t,n){return(0,c.mf)(t)?t(n):{...n,...t}}function P(t,n,e={}){return function(i){const{ref:{entitiesKey:s}=a}=e,r={};for(const o of(0,c.Eq)(t))L(o,e)(i)&&(r[o]=V(n,H(o,e)(i)));return{...i,[s]:{...i[s],...r}}}}function U(t){return(0,E.x)((n,e)=>n[t]===e[t])}function G(t,n,e){const i=t[n];if(!(0,c.o8)(i))return e?function D(t,n){return t&&n?(0,c.mf)(n)?n(t):t[n]:t}(i,e):i}$("UI");const{selectActiveId:ne,setActiveId:ie,withActiveId:se,resetActiveId:re,getActiveId:oe}=(0,c.U4)("activeId",{initialValue:void 0});function Z(t={}){const{ref:{entitiesKey:n}=a}=t;return function(e){return e[n][oe(e)]}}(0,c.v8)("activeIds",{initialValue:[]});var k=d(6838),F=d(4782),ae=d(9841),b=d(6885),x=d(953),fe=d(833),ye=d(8779),R=d(5528),pe=d(2223);let he=(()=>{class t{constructor(){this.store=(0,c.MT)({name:"archerySession"},z({initialValue:[]}),se(),(0,c.vl)({sort:null})),(0,k.xi)(this.store,{key:"archery-session",storage:k.n4}),this.sort$=this.store.pipe((0,c.Ys)(e=>e.sort),(0,F.d)({refCount:!0,bufferSize:1})),this.sessions$=this.store.pipe(function X(t={}){const{ref:{entitiesKey:n,idsKey:e}=a}=t;return(0,g.z)(U(n),(0,S.U)(i=>i[e].map(s=>i[n][s])))}(),(0,F.d)({refCount:!0,bufferSize:1})),this.activeSession$=this.store.pipe(function ce(t={}){const{ref:n=a}=t;return function(e){return e.pipe(ne()).pipe((0,M.w)(i=>e.pipe(function q(t,n={}){const{ref:{entitiesKey:e}=a,pluck:i}=n;return(0,g.z)(U(e),(0,c.Ys)(s=>G(s[e],t,i)))}(i,{ref:n}))))}}(),(0,F.d)({refCount:!0,bufferSize:1})),this.sortedSessions$=(0,ae.a)([this.sessions$,this.sort$]).pipe((0,S.U)(([e,i])=>{const s=[...e];switch(i){case b.a.NEWEST_FIRST:return s.sort((r,o)=>function le(t,n){(0,fe.Z)(2,arguments);var e=(0,x.Z)(t),i=(0,x.Z)(n),s=e.getTime()-i.getTime();return s>0?-1:s<0?1:s}(new Date(r.date_created),new Date(o.date_created)));case b.a.OLDEST_FIRST:return s.sort((r,o)=>(0,ye.Z)(new Date(r.date_created),new Date(o.date_created)));case b.a.HIGHEST_SUM:return s.sort((r,o)=>(0,R.E2)(o)-(0,R.E2)(r));case b.a.LOWEST_SUM:return s.sort((r,o)=>(0,R.E2)(r)-(0,R.E2)(o));case b.a.HIGHEST_AVERAGE:return s.sort((r,o)=>(0,R.P1)(o)-(0,R.P1)(r));case b.a.LOWEST_AVERAGE:return s.sort((r,o)=>(0,R.P1)(r)-(0,R.P1)(o));case b.a.MOST_ENTRIES:return s.sort((r,o)=>o.entries.length-r.entries.length);default:return e}}))}setSessions(e){this.store.update(function j(t,n={}){return function(e,i){const{ref:s=a}=n,{entitiesKey:r,idsKey:o}=s,{ids:u,asObject:f}=l(t,_(i,s));return{...e,[r]:f,[o]:u}}}(e))}addSession(e){this.store.update(B(e))}addSessions(e){this.store.update(B(e))}setActiveSession(e){this.store.update(ie(e))}resetActiveSession(){this.store.update(re())}deleteSessions(e){this.store.update(function C(t,n={}){return function(e){const{ref:{idsKey:i,entitiesKey:s}=a}=n,r=(0,c.Eq)(t),o={...e[s]},u=e[i].filter(f=>!r.includes(f));for(const f of r)Reflect.deleteProperty(o,f);return{...e,[s]:o,[i]:u}}}(e))}updateSession(e){this.store.update(P(e.id,e))}setSort(e){this.store.update((0,c.tg)("sort",e))}getSessions(){return this.store.query(function J(t={}){const{ref:{entitiesKey:n,idsKey:e}=a}=t;return function(i){return i[e].map(s=>i[n][s])}}())}getSessionsCount(){return this.store.query(function te(t={}){return function(n){const{ref:{idsKey:e}=a}=t;return n[e].length}}())}getSessionByID(e){return this.store.query(H(e))}getActiveSession(){return this.store.query(Z())}addEntryForActiveSession(e){const i=this.store.query(Z());i&&(i.entries.push(e),this.updateSession(i))}toggleLockForSession(e){if(e.locked=!e.locked,e.locked){const i=new Audio("assets/lock.wav");i.load(),i.play()}else{const i=new Audio("assets/unlock.wav");i.load(),i.play()}this.updateSession(e)}changeSessionName(e,i){this.store.update(P(e,{name:i}))}editEntryForSession(e,i){const s=this.getSessionByID(e);if(s){const r=s.entries.findIndex(o=>o.id===i.id);s.entries.splice(r,1,i),this.updateSession(s)}}deleteEntryForSession(e,i){const s=this.getSessionByID(e);s&&(s.entries=s.entries.filter(r=>r.id!==i),this.updateSession(s))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pe.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},833:(O,K,d)=>{function c(g,E){if(E.length<g)throw new TypeError(g+" argument"+(g>1?"s":"")+" required, but only "+E.length+" present")}d.d(K,{Z:()=>c})},8779:(O,K,d)=>{d.d(K,{Z:()=>E});var c=d(953),g=d(833);function E(S,M){(0,g.Z)(2,arguments);var l=(0,c.Z)(S),h=(0,c.Z)(M),y=l.getTime()-h.getTime();return y<0?-1:y>0?1:y}},953:(O,K,d)=>{d.d(K,{Z:()=>E});var c=d(1002),g=d(833);function E(S){(0,g.Z)(1,arguments);var M=Object.prototype.toString.call(S);return S instanceof Date||"object"===(0,c.Z)(S)&&"[object Date]"===M?new Date(S.getTime()):"number"==typeof S||"[object Number]"===M?new Date(S):(("string"==typeof S||"[object String]"===M)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},3630:(O,K,d)=>{d.d(K,{d:()=>S,t:()=>M});var c=d(2223),g=d(1692),E=d(1217);let S=(()=>{class l{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(y){this._vertical=(0,g.Ig)(y)}get inset(){return this._inset}set inset(y){this._inset=(0,g.Ig)(y)}}return l.\u0275fac=function(y){return new(y||l)},l.\u0275cmp=c.Xpm({type:l,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(y,D){2&y&&(c.uIk("aria-orientation",D.vertical?"vertical":"horizontal"),c.ekj("mat-divider-vertical",D.vertical)("mat-divider-horizontal",!D.vertical)("mat-divider-inset",D.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(y,D){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),l})(),M=(()=>{class l{}return l.\u0275fac=function(y){return new(y||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[E.BQ,E.BQ]}),l})()},1002:(O,K,d)=>{function c(g){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(g)}d.d(K,{Z:()=>c})}}]);