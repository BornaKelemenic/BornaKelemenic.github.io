import{c as Fe,d as pe,f as W,g as de}from"./chunk-MPFUNZLY.js";import{b as _t,c as bt,d as vt,e as he,f as Ht,g as Ut,h as Yt}from"./chunk-TAU52OI4.js";import"./chunk-U6H7CCQD.js";import{a as Bt,c as kt,d as Rt,e as Lt,f as zt,g as At,h as Vt,i as Pt,j as Nt,k as jt,l as _e,n as be,o as ve}from"./chunk-44HE64SY.js";import{e as rt}from"./chunk-FTTXTO3X.js";import{a as ye,b as Se,c as xe,d as Ce}from"./chunk-RRYJ6ZSQ.js";import{a as Ct,b as Mt,e as fe,f as Dt,g as K}from"./chunk-QTGRJOY7.js";import{c as Tt}from"./chunk-TUX3VW3M.js";import{a as yt,b as St,c as qt}from"./chunk-R6X5GI5D.js";import{d as Ot}from"./chunk-SRBIYDI5.js";import"./chunk-NGGUKZKR.js";import{c as ge,d as gt,e as ut,f as ft,g as ht,h as Z,i as Gt}from"./chunk-NDFNEPG7.js";import{a as Ke,f as Qe,h as G,i as U,k as Je,l as mt,m as ct}from"./chunk-FNJ3HGKX.js";import{a as Et}from"./chunk-YB7CCIRZ.js";import{b as ue,c as xt,k as wt,m as Ft,q as ee,s as It,v as $t}from"./chunk-AG3FRLJI.js";import{b as Xe,j as le,k as me,l as ce,m as st,n as R}from"./chunk-3AIAIFAZ.js";import{Bb as Ze,Cb as $,Cc as at,E as I,Ea as D,Fa as E,Fc as we,G as ze,Ga as H,H as J,Ia as B,Ib as q,Ja as k,Jc as lt,Ka as d,La as r,Ma as s,Na as h,O as Ae,Oa as S,Oc as L,P as Ve,Pa as x,Pc as pt,Ra as w,Rc as dt,S as m,Sb as Y,Sc as M,Ta as v,Tc as T,Ua as c,V as _,W as b,Yb as se,Yc as z,Z as Pe,Zc as A,_ as ne,aa as De,cb as X,da as oe,db as He,eb as re,gb as l,hb as u,ia as a,ib as g,j as ke,jb as Ee,kb as N,la as Ne,lb as O,m as ie,mb as j,n as Te,oc as et,pc as tt,qa as f,qb as qe,r as Re,ra as Oe,rb as C,sa as ae,sb as F,sc as it,tb as Ge,vc as nt,wa as y,wc as ot,xb as Ue,ya as je,yb as Ye,z as Le,zb as We}from"./chunk-6ZKZZP75.js";import{a as Be,f as Me}from"./chunk-EQDQRRRY.js";var Wt="mat-badge-content",oi=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,i){},styles:[`.mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-sys-error));color:var(--mat-badge-text-color, var(--mat-sys-on-error));font-family:var(--mat-badge-text-font, var(--mat-sys-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-sys-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-sys-corner-full))}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}@media(forced-colors: active){.mat-badge-content{outline:solid 1px;border-radius:0}}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-error) 38%, transparent));color:var(--mat-badge-disabled-state-text-color, var(--mat-sys-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, 6px);min-height:var(--mat-badge-small-size-container-size, 6px);line-height:var(--mat-badge-small-size-line-height, 6px);padding:var(--mat-badge-small-size-container-padding, 0);font-size:var(--mat-badge-small-size-text-size, 0);margin:var(--mat-badge-small-size-container-offset, -6px 0)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset, -6px)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, 16px);min-height:var(--mat-badge-container-size, 16px);line-height:var(--mat-badge-line-height, 16px);padding:var(--mat-badge-container-padding, 0 4px);font-size:var(--mat-badge-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-container-offset, -12px 0)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset, -12px)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, 16px);min-height:var(--mat-badge-large-size-container-size, 16px);line-height:var(--mat-badge-large-size-line-height, 16px);padding:var(--mat-badge-large-size-container-padding, 0 4px);font-size:var(--mat-badge-large-size-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-large-size-container-offset, -12px 0)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset, -12px)}
`],encapsulation:2,changeDetection:0})}return t})(),Zt=(()=>{class t{_ngZone=m(je);_elementRef=m(oe);_ariaDescriber=m(at);_renderer=m(Ne);_animationsDisabled=Xe();_idGenerator=m(ot);get color(){return this._color}set color(n){this._setColor(n),this._color=n}_color="primary";overlap=!0;disabled;position="above after";get content(){return this._content}set content(n){this._updateRenderedContent(n)}_content;get description(){return this._description}set description(n){this._updateDescription(n)}_description;size="medium";hidden;_badgeElement;_inlineBadgeDescription;_isInitialized=!1;_interactivityChecker=m(it);_document=m(Pe);constructor(){let n=m(et);n.load(oi),n.load(tt)}isAbove(){return this.position.indexOf("below")===-1}isAfter(){return this.position.indexOf("before")===-1}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){let n=this._renderer.createElement("span"),e="mat-badge-active";return n.setAttribute("id",this._idGenerator.getId("mat-badge-content-")),n.setAttribute("aria-hidden","true"),n.classList.add(Wt),this._animationsDisabled&&n.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(n),typeof requestAnimationFrame=="function"&&!this._animationsDisabled?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{n.classList.add(e)})}):n.classList.add(e),n}_updateRenderedContent(n){let e=`${n??""}`.trim();this._isInitialized&&e&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=e),this._content=e}_updateDescription(n){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!n||this._isHostInteractive())&&this._removeInlineDescription(),this._description=n,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,n):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(n){let e=this._elementRef.nativeElement.classList;e.remove(`mat-badge-${this._color}`),n&&e.add(`mat-badge-${n}`)}_clearExistingBadges(){let n=this._elementRef.nativeElement.querySelectorAll(`:scope > .${Wt}`);for(let e of Array.from(n))e!==this._badgeElement&&e.remove()}static \u0275fac=function(e){return new(e||t)};static \u0275dir=ae({type:t,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(e,i){e&2&&re("mat-badge-overlap",i.overlap)("mat-badge-above",i.isAbove())("mat-badge-below",!i.isAbove())("mat-badge-before",!i.isAfter())("mat-badge-after",i.isAfter())("mat-badge-small",i.size==="small")("mat-badge-medium",i.size==="medium")("mat-badge-large",i.size==="large")("mat-badge-hidden",i.hidden||!i.content)("mat-badge-disabled",i.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",q],disabled:[2,"matBadgeDisabled","disabled",q],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",q]}})}return t})(),Kt=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Oe({type:t});static \u0275inj=Ve({imports:[nt,we,we]})}return t})();var ri={sortBy:fe.NEWEST_FIRST,targetFace:null,shootingType:null,distance:null,bowType:null},Qt="archery-stats-session-filters",P=(()=>{let o=class o{constructor(){this.store=Qe({name:Qt},Je(ri)),mt(this.store,{key:Qt,storage:ct}),this.sortBy$=this.store.pipe(U(e=>e.sortBy),I({refCount:!0,bufferSize:1})),this.targetFace$=this.store.pipe(U(e=>e.targetFace),I({refCount:!0,bufferSize:1})),this.shootingType$=this.store.pipe(U(e=>e.shootingType),I({refCount:!0,bufferSize:1})),this.bowType$=this.store.pipe(U(e=>e.bowType),I({refCount:!0,bufferSize:1})),this.distance$=this.store.pipe(U(e=>e.distance),I({refCount:!0,bufferSize:1})),this.filters$=Te({sortBy:this.sortBy$,targetFace:this.targetFace$,shootingType:this.shootingType$,bowType:this.bowType$,distance:this.distance$}).pipe(I({refCount:!0,bufferSize:1})),this.activeFiltersCount$=Te({targetFace:this.targetFace$,shootingType:this.shootingType$,bowType:this.bowType$,distance:this.distance$}).pipe(ie(e=>{let i=0;return Object.values(e).forEach(p=>{Tt(p)&&i++}),i}),I({refCount:!0,bufferSize:1}))}setSortBy(e){this.store.update(G("sortBy",e))}setTargetFace(e){this.store.update(G("targetFace",e))}setShootingType(e){this.store.update(G("shootingType",e))}setBowType(e){this.store.update(G("bowType",e))}setDistance(e){this.store.update(G("distance",e))}getStoreProp(e){return this.store.getValue()[e]}resetAll(){this.store.reset()}resetOnlyFilters(){Ke(()=>{let e=this.getStoreProp("sortBy");this.resetAll(),this.setSortBy(e)})}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Ae({token:o,factory:o.\u0275fac,providedIn:"root"});let t=o;return t})();function si(t,o){if(t&1&&(r(0,"mat-radio-button",3),l(1),s()),t&2){let n=o.$implicit,e=c().$implicit;d("value",n[0]),a(),g(" ",e(n[1])," ")}}function li(t,o){if(t&1&&(h(0,"img",8),r(1,"span",9),l(2),s()),t&2){let n=c().$implicit,e=c();d("ngSrc",e.TargetFaceImgMap.get(e.targetFaceControl.value)),a(2),g(" ",n(e.TargetFaceNameMap.get(e.targetFaceControl.value))," ")}}function mi(t,o){if(t&1&&l(0),t&2){let n=c().$implicit;g(" ",n("generic.all")," ")}}function ci(t,o){if(t&1&&(r(0,"mat-option",3),h(1,"img",8),r(2,"span",9),l(3),s()()),t&2){let n=o.$implicit,e=c().$implicit,i=c(),p=n[0],Q=n[1];d("value",p),a(),d("ngSrc",i.TargetFaceImgMap.get(p)),a(2),g(" ",e(Q)," ")}}function pi(t,o){if(t&1&&(r(0,"mat-option",3),l(1),s()),t&2){let n=o.$implicit,e=c().$implicit,i=n[0],p=n[1];d("value",i),a(),g(" ",e(p)," ")}}function di(t,o){if(t&1&&(S(0),r(1,"div",1)(2,"label"),l(3),s(),r(4,"mat-radio-group",2)(5,"mat-radio-button",3),l(6),s(),B(7,si,2,2,"mat-radio-button",3,H),s()(),r(9,"mat-form-field",4)(10,"mat-label"),l(11),s(),r(12,"mat-select",2)(13,"mat-select-trigger"),D(14,li,3,2)(15,mi,1,1),s(),r(16,"mat-option",5),l(17),s(),B(18,ci,4,3,"mat-option",3,H),s()(),r(20,"mat-form-field",4)(21,"mat-label"),l(22),s(),r(23,"mat-select",2)(24,"mat-option",5),l(25),s(),B(26,pi,2,2,"mat-option",3,H),s()(),r(28,"div",6)(29,"label"),l(30),s(),h(31,"app-small-counter",7),s(),x()),t&2){let n=o.$implicit,e=c();a(3),g(" ",n("form.labels.shootingType"),": "),a(),d("formControl",e.shootingTypeControl),a(),d("value",null),a(),u(n("generic.all")),a(),k(e.ShootingTypeNameMap.entries()),a(4),u(n("form.labels.targetFace")),a(),d("formControl",e.targetFaceControl),a(2),E(e.targetFaceControl.value!=="all"?14:15),a(3),u(n("generic.all")),a(),k(e.TargetFaceNameMap.entries()),a(4),u(n("form.labels.bowType")),a(),d("formControl",e.bowTypeControl),a(2),u(n("generic.all")),a(),k(e.BowTypeNameMap.entries()),a(4),u(n("form.labels.distance")),a(),d("formControl",e.distanceControl)}}var Jt=(()=>{let o=class o{constructor(){this.destroyRef=m(ne),this.sessionFiltersRepo=m(P),this.TargetFaceNameMap=be,this.TargetFaceImgMap=ve,this.ShootingType=jt,this.ShootingTypeNameMap=_e,this.BowTypeNameMap=ue,this.targetFaceControl=new ee(this.sessionFiltersRepo.getStoreProp("targetFace")??"all",{nonNullable:!0}),this.shootingTypeControl=new ee(this.sessionFiltersRepo.getStoreProp("shootingType")),this.bowTypeControl=new ee(this.sessionFiltersRepo.getStoreProp("bowType")??"all",{nonNullable:!0}),this.distanceControl=new ee(this.sessionFiltersRepo.getStoreProp("distance"),{nonNullable:!0,validators:[wt.min(0)]}),this.listenToRepoValueChanges(),this.setupControlValueChangeListeners()}listenToRepoValueChanges(){this.sessionFiltersRepo.filters$.pipe(L(this.destroyRef)).subscribe(({targetFace:e,shootingType:i,distance:p,bowType:Q})=>{this.targetFaceControl.setValue(e??"all",{emitEvent:!1}),this.shootingTypeControl.setValue(i,{emitEvent:!1}),this.bowTypeControl.setValue(Q??"all",{emitEvent:!1}),this.distanceControl.setValue(p,{emitEvent:!1})})}setupControlValueChangeListeners(){this.targetFaceControl.valueChanges.pipe(L(this.destroyRef)).subscribe(e=>this.sessionFiltersRepo.setTargetFace(e==="all"?null:e)),this.shootingTypeControl.valueChanges.pipe(L(this.destroyRef)).subscribe(e=>this.sessionFiltersRepo.setShootingType(e)),this.bowTypeControl.valueChanges.pipe(L(this.destroyRef)).subscribe(e=>this.sessionFiltersRepo.setBowType(e==="all"?null:e)),this.distanceControl.valueChanges.pipe(L(this.destroyRef)).subscribe(e=>this.sessionFiltersRepo.setDistance(e===0?null:e))}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=f({type:o,selectors:[["app-session-filters"]],decls:1,vars:0,consts:[[4,"transloco"],[1,"flex-column","margin-bottom-4x"],[3,"formControl"],[3,"value"],[1,"margin-bottom-4x"],["value","all"],[1,"flex-column","align-items-start"],["suffix","m","moreIncrements","",3,"formControl"],["width","30","height","30",2,"vertical-align","middle",3,"ngSrc"],[1,"margin-left-2x"]],template:function(i,p){i&1&&y(0,di,32,13,"ng-container",0)},dependencies:[$t,Ft,It,se,T,M,Ot,At,Lt,zt,Nt,kt,Bt,Vt,Pt,rt,Rt],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0});let t=o;return t})();function gi(t,o){if(t&1){let n=w();S(0),r(1,"h2",1),l(2),s(),r(3,"mat-dialog-content"),h(4,"app-session-filters"),s(),r(5,"mat-dialog-actions")(6,"button",2),l(7),s(),h(8,"span",3),r(9,"button",4),v("click",function(){_(n);let i=c();return b(i.sessionFiltersRepo.resetOnlyFilters())}),l(10),s()(),x()}if(t&2){let n=o.$implicit;a(2),g(" ",n("session.dialogs.filtersDialog.title")," "),a(5),g(" ",n("generic.close")," "),a(3),g(" ",n("generic.resetFilters")," ")}}var Xt=(()=>{let o=class o{constructor(){this.sessionFiltersRepo=m(P)}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=f({type:o,selectors:[["app-session-filters-dialog"]],decls:1,vars:0,consts:[[4,"transloco"],["mat-dialog-title",""],["mat-button","","type","button","mat-dialog-close",""],[1,"spacer"],["mat-button","","color","warn",3,"click"]],template:function(i,p){i&1&&y(0,gi,11,3,"ng-container",0)},dependencies:[T,M,Jt,Z,gt,ut,ht,ft,R,me],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let t=o;return t})();function fi(t,o){if(t&1){let n=w();r(0,"button",7),v("click",function(i){return _(n),i.preventDefault(),b(i.stopPropagation())}),r(1,"mat-icon"),l(2),s()()}if(t&2){c();let n=X(4),e=c();d("matMenuTriggerFor",n),a(2),u(e.$icon())}}function hi(t,o){if(t&1){let n=w();r(0,"button",8),v("click",function(i){return _(n),i.preventDefault(),b(i.stopPropagation())}),r(1,"mat-icon"),l(2),s()()}if(t&2){c();let n=X(4),e=c();d("matMenuTriggerFor",n),a(2),u(e.$icon())}}function _i(t,o){if(t&1){let n=w();S(0),D(1,fi,3,2,"button",2)(2,hi,3,2,"button",3),r(3,"mat-menu",null,0)(5,"button",4),v("click",function(){_(n);let i=c();return b(i.toggleLock())}),r(6,"mat-icon"),l(7),s(),r(8,"span"),l(9),s()(),r(10,"button",5),v("click",function(){_(n);let i=c();return b(i.openEditDialog())}),r(11,"mat-icon"),l(12,"edit"),s(),r(13,"span"),l(14),s()(),r(15,"button",4),v("click",function(){_(n);let i=c();return b(i.deleteSession())}),r(16,"mat-icon",6),l(17,"delete"),s(),r(18,"span"),l(19),s()()(),x()}if(t&2){let n,e=o.$implicit,i=c();a(),E((n=i.$buttonType())==="icon"?1:n==="fab"?2:-1),a(6),u(i.$isSessionLocked()?"lock":"lock_open"),a(2),g(" ",i.$isSessionLocked()?e("session.actions.pressToUnlock"):e("session.actions.pressToLock")," "),a(),d("disabled",i.$isSessionLocked()),a(4),u(e("session.actions.editSession")),a(5),u(e("session.actions.deleteSession"))}}var ei=(()=>{let o=class o{constructor(){this.sessionsDbService=m(K),this.dialog=m(ge),this.transloco=m(dt),this.appStateRepo=m(he),this.soundboard=m(Ut),this.$isSessionLocked=Ye(()=>Mt(this.$session().locked)),this.$session=$.required({alias:"session"}),this.$icon=$("more_vert",{alias:"icon-name"}),this.$buttonType=$("icon",{alias:"button-type"}),this.sessionDeleted=Ze()}deleteSession(){this.dialog.open(Gt,{width:"500px",data:{text:this.transloco.translate("session.dialogs.deleteDialog.text")}}).afterClosed().pipe(Le(1)).subscribe(i=>Me(this,null,function*(){i&&(yield this.sessionsDbService.deleteSession(this.$session().id),this.appStateRepo.setLastVisitedSession(null),this.sessionDeleted.emit())}))}openEditDialog(){this.dialog.open(Yt,{width:"500px",data:{sessionId:this.$session().id}})}toggleLock(){return Me(this,null,function*(){this.soundboard.play(this.$isSessionLocked()?"unlock":"lock"),yield this.sessionsDbService.updateSession(this.$session().id,{locked:Ct(!this.$isSessionLocked())})})}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=f({type:o,selectors:[["app-session-options-menu"]],inputs:{$session:[1,"session","$session"],$icon:[1,"icon-name","$icon"],$buttonType:[1,"button-type","$buttonType"]},outputs:{sessionDeleted:"sessionDeleted"},decls:1,vars:0,consts:[["menu","matMenu"],[4,"transloco"],["mat-icon-button","","type","button",3,"matMenuTriggerFor"],["mat-fab","","type","button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click","disabled"],["color","warn"],["mat-icon-button","","type","button",3,"click","matMenuTriggerFor"],["mat-fab","","type","button",3,"click","matMenuTriggerFor"]],template:function(i,p){i&1&&y(0,_i,20,6,"ng-container",1)},dependencies:[T,M,R,le,ce,A,z,Ce,Se,ye,xe,Z],styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0});let t=o;return t})();function bi(t,o){t&1&&(r(0,"mat-icon"),l(1,"lock"),s())}function vi(t,o){if(t&1&&(S(0),h(1,"img",1),r(2,"div",2)(3,"span",3),l(4),D(5,bi,2,0,"mat-icon"),s(),r(6,"small"),l(7),C(8,"date"),C(9,"dateDistance"),s(),r(10,"div",4)(11,"small"),l(12),s(),r(13,"small"),l(14,"\u2022"),s(),r(15,"small"),l(16),s(),r(17,"small"),l(18,"\u2022"),s(),r(19,"small"),l(20),s(),r(21,"small"),l(22,"\u2022"),s(),r(23,"small"),l(24),C(25,"async"),s(),r(26,"small"),l(27,"\u2022"),s(),r(28,"small"),l(29),s(),r(30,"small"),l(31),C(32,"async"),s(),r(33,"small"),l(34,"\u2022"),s(),r(35,"small"),l(36),s(),r(37,"small"),l(38),C(39,"async"),s()()(),h(40,"app-session-options-menu",5),x()),t&2){let n=o.$implicit,e=c(),i=e.$session();a(),d("ngSrc",e.TargetFaceImgMap.get(i.targetFace)),a(3),g(" ",i.name," "),a(),E(i.locked?5:-1),a(2),Ee(" ",Ge(8,15,i.date,"short")," (",F(9,18,i.date),") "),a(5),u(n(e.BowTypeNameMap.get(i.bowType))),a(4),u(n(e.ShootingTypeNameMap.get(i.shootingType))),a(4),g("",i.distance,"m"),a(4),Ee("",n("session.info.rounds"),": ",F(25,20,e.roundCount$)),a(5),g("",n("session.info.avg"),":"),a(2),u(F(32,22,e.avgScore$)),a(5),g("",n("session.info.total"),":"),a(2),u(F(39,24,e.shotsTotal$)),a(2),d("session",i)}}var ti=(()=>{let o=class o{constructor(){this.sessionsDbService=m(K),this.TargetFaceNameMap=be,this.TargetFaceImgMap=ve,this.ShootingTypeNameMap=_e,this.BowTypeNameMap=ue,this.roundCount$=ke(xt(()=>this.sessionsDbService.getRoundsCountBySessionId(this.$session().id))),this.$session=$.required({alias:"session"}),this.session$=pt(this.$session).pipe(I({refCount:!0,bufferSize:1})),this.shotsTotal$=this.session$.pipe(J(e=>this.sessionsDbService.getTotalScoreBySessionID$(e.id))),this.avgScore$=this.session$.pipe(J(e=>this.sessionsDbService.getAverageScoreBySessionID$(e.id)))}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=f({type:o,selectors:[["app-session-list-item"]],inputs:{$session:[1,"session","$session"]},decls:1,vars:0,consts:[[4,"transloco"],["alt","Target face","width","50","height","50",2,"border-radius","5px",3,"ngSrc"],[1,"flex-column","align-items-start"],[1,"session-name"],[1,"session-info"],[3,"session"]],template:function(i,p){i&1&&y(0,vi,41,26,"ng-container",0)},dependencies:[Y,T,M,se,qt,Ht,ei,A,z],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:50px minmax(0,1fr) 40px;align-items:center;justify-content:flex-start;gap:var(--spacing-3x);padding:var(--spacing-2x)}.session-name[_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:var(--spacing-1x);font-size:1.25em}.session-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;column-gap:var(--spacing-1x)}"],changeDetection:0});let t=o;return t})();function yi(t,o){t&1&&(r(0,"mat-icon",5),l(1,"radio_button_checked"),s())}function Si(t,o){t&1&&(r(0,"mat-icon"),l(1,"radio_button_unchecked"),s())}function xi(t,o){if(t&1){let n=w();N(0),r(1,"button",4),v("click",function(){_(n);let i=j(0),p=c(2);return b(p.sessionFiltersRepo.setSortBy(i))}),D(2,yi,2,0,"mat-icon",5)(3,Si,2,0,"mat-icon"),r(4,"span"),l(5),s()()}if(t&2){let n=o.$implicit,e=c().$implicit,i=j(1),p=O(n[0]),Q=n[1];a(2),E(i===p?2:3),a(3),u(e(Q))}}function Ci(t,o){if(t&1&&(S(0),N(1),C(2,"async"),r(3,"button",2)(4,"mat-icon"),l(5,"sort"),s(),l(6),s(),r(7,"mat-menu",null,0),B(9,xi,6,3,"button",3,H),s(),x()),t&2){let n=o.$implicit,e=X(8),i=c();a();let p=O(F(2,2,i.sessionFiltersRepo.sortBy$));a(2),d("matMenuTriggerFor",e),a(3),g(" ",n(i.SessionSortLabelMap.get(p))," "),a(3),k(i.SessionSortLabelMap.entries())}}var ii=(()=>{let o=class o{constructor(){this.sessionFiltersRepo=m(P),this.SessionSort=fe,this.SessionSortLabelMap=Dt}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=f({type:o,selectors:[["app-session-sort-menu"]],decls:1,vars:0,consts:[["menu","matMenu"],[4,"transloco"],["mat-button","","type","button",3,"matMenuTriggerFor"],["mat-menu-item",""],["mat-menu-item","",3,"click"],["color","primary"]],template:function(i,p){i&1&&y(0,Ci,11,5,"ng-container",1)},dependencies:[Y,T,M,Ce,Se,ye,xe,R,me,A,z],styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0});let t=o;return t})();var ni=(()=>{let o=class o{constructor(){this.elementRef=m(oe),this.$appScrollIntoView=$.required({alias:"appScrollIntoView",transform:q}),this.$scrollDelay=$(100,{alias:"scrollDelay"}),We(()=>{this.$appScrollIntoView()&&Ue(()=>{setTimeout(()=>{this.elementRef.nativeElement.scrollIntoView({behavior:"smooth"})},this.$scrollDelay())})})}};o.\u0275fac=function(i){return new(i||o)},o.\u0275dir=ae({type:o,selectors:[["","appScrollIntoView",""]],hostVars:2,hostBindings:function(i,p){i&2&&He("scroll-margin","56px")},inputs:{$appScrollIntoView:[1,"appScrollIntoView","$appScrollIntoView"],$scrollDelay:[1,"scrollDelay","$scrollDelay"]}});let t=o;return t})();var Mi=t=>["/sessions",t],Ti=(t,o)=>o.id;function Di(t,o){t&1&&h(0,"mat-divider",11)}function Ei(t,o){if(t&1&&(r(0,"a",9),h(1,"app-session-list-item",10),s(),D(2,Di,1,0,"mat-divider",11)),t&2){let n=o.$implicit,e=o.$index,i=o.$count;c(2);let p=j(2);d("routerLink",qe(6,Mi,n.id))("appScrollIntoView",e>=3&&p===n.id),a(),re("active",p===n.id),d("session",n),a(),E(e!==i-1?2:-1)}}function wi(t,o){if(t&1&&(r(0,"h5",6),l(1),s()),t&2){let n=c().$implicit;a(),g(" ",n("sessionsList.noSessions")," ")}}function Fi(t,o){if(t&1){let n=w();r(0,"button",12),v("click",function(){_(n);let i=c(2);return b(i.scrollToTop())}),r(1,"mat-icon"),l(2,"keyboard_arrow_up"),s()()}t&2&&d("@scrollToTopButtonAnimation",void 0)}function Ii(t,o){if(t&1){let n=w();S(0),r(1,"app-page-with-title",1)(2,"button",2),v("click",function(){_(n);let i=c();return b(i.openFiltersDialog())}),r(3,"mat-icon",3),l(4,"tune"),s()(),r(5,"div",4)(6,"div",5),h(7,"app-session-sort-menu"),s(),B(8,Ei,3,8,null,null,Ti,!1,wi,2,1,"h5",6),C(11,"async"),s(),D(12,Fi,3,1,"button",7),r(13,"button",8)(14,"mat-icon"),l(15,"add"),s()()(),x()}if(t&2){let n=o.$implicit,e=c(),i=j(0),p=j(4);a(),d("page-title",n("sessionsList.title")),a(),d("matTooltip",n("generic.filters"))("matBadge",i)("matBadgeHidden",!i),a(),d("color",i?"primary":""),a(5),k(F(11,7,e.sessions$)),a(4),E(p?12:-1)}}var sa=(()=>{let o=class o{constructor(){this.destroyRef=m(ne),this.dialog=m(ge),this.sessionsDbService=m(K),this.appStateRepo=m(he),this.sessionFiltersRepo=m(P),this.sessions$=this.sessionFiltersRepo.filters$.pipe(J(e=>this.sessionsDbService.getFilteredSessions(Be({},e)))),this.$mainElement=De(null),this.$showScrollToTopButton=De(!1)}ngAfterViewInit(){let e=document.querySelector("main");e&&(this.$mainElement.set(e),Re(e,"scroll").pipe(ie(()=>e.scrollTop),ze(e.scrollTop),L(this.destroyRef)).subscribe({next:i=>{this.$showScrollToTopButton.set(i>100)}}))}scrollToTop(){this.$mainElement()?.scrollTo({top:0,behavior:"smooth"})}openFiltersDialog(){this.dialog.open(Xt,{width:"500px"})}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=f({type:o,selectors:[["app-session-list-page"]],decls:6,vars:7,consts:[[4,"transloco"],[3,"page-title"],["mat-icon-button","","page-action","",3,"click","matTooltip","matBadge","matBadgeHidden"],[3,"color"],[1,"standard-centering"],[1,"margin-bottom-2x"],[1,"text-center","margin-top-6x"],["mat-mini-fab","",1,"fab-bottom-center"],["mat-fab","","routerLink","/create",1,"fab-bottom-right"],[3,"routerLink","appScrollIntoView"],[3,"session"],[1,"margin-y-4x"],["mat-mini-fab","",1,"fab-bottom-center",3,"click"]],template:function(i,p){i&1&&(N(0),C(1,"async"),N(2),C(3,"async"),N(4),y(5,Ii,16,9,"ng-container",0)),i&2&&(O(F(1,0,p.sessionFiltersRepo.activeFiltersCount$)),a(2),O(F(3,3,p.appStateRepo.lastVisitedSession$)),a(2),O(p.$showScrollToTopButton()))},dependencies:[Y,lt,T,M,ti,Et,ii,ni,R,st,le,ce,A,z,_t,Z,vt,bt,Kt,Zt,St,yt],styles:["[_nghost-%COMP%]{display:block;padding-bottom:var(--spacing-fab-clearance)}a[_ngcontent-%COMP%]{display:block}app-session-list-item.active[_ngcontent-%COMP%]{color:var(--mat-sys-primary)}mat-divider[_ngcontent-%COMP%]{--mat-divider-color: #2e2e2c}"],data:{animation:[Fe("scrollToTopButtonAnimation",[de(":enter",[W({opacity:0}),pe("150ms ease-in-out",W({opacity:1}))]),de(":leave",[W({opacity:1}),pe("150ms ease-in-out",W({opacity:0}))])])]},changeDetection:0});let t=o;return t})();export{sa as SessionListPageComponent};
