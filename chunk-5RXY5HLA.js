import{a as ne,b as re,c as ae,d as me,e as se,f as le,g as ce,h as pe,j as de,k as ue,l as fe,m as ge,n as Ce,o as Se,p as _e,r as ve,s as xe}from"./chunk-KFKVXLL7.js";import{b as j,d as A,g as U}from"./chunk-NZTYITEQ.js";import{c as H,j as J,k as K,m as Q,o as p,q as X,r as Y,s as Z,u as f,v as ee,x as te,y as ie,z as oe}from"./chunk-F2QLQMHO.js";import{Q as _,a as L,e as z}from"./chunk-LFKKBSHB.js";import{Ka as g,Ma as l,Ra as O,Sa as I,Ua as V,Va as P,Wa as m,X as x,Xa as a,Y as b,Ya as C,Yc as B,Za as M,_a as y,ab as T,da as h,db as w,ea as F,ed as W,f as v,fb as c,ma as k,od as E,pd as D,qb as s,rb as S,sa as G,sb as u,ta as r,yb as N}from"./chunk-32JRF7TD.js";function be(){return new Z({name:new f("",{nonNullable:!0,validators:[p.required]}),targetFace:new f(Ce.FULL,{nonNullable:!0,validators:[p.required]}),distance:new f(20,{nonNullable:!0,validators:[p.required,p.min(1)]}),arrowCount:new f(6,{nonNullable:!0,validators:[p.required,p.min(1)]}),shootingType:new f(fe.INDOOR,{nonNullable:!0,validators:[p.required]})})}function ye(t,i){if(t&1&&(m(0,"mat-error"),s(1),a()),t&2){let o=c().$implicit;r(),u(" ",o("form.validations.fieldRequired")," ")}}function Te(t,i){if(t&1&&(m(0,"mat-radio-button",6),s(1),a()),t&2){let o=i.$implicit,e=c().$implicit;l("value",o[0]),r(),u(" ",e(o[1])," ")}}function we(t,i){if(t&1&&(m(0,"mat-option",6),s(1),a()),t&2){let o=i.$implicit,e=c().$implicit;l("value",o[0]),r(),u(" ",e(o[1])," ")}}function Ne(t,i){if(t&1){let o=T();M(0),m(1,"form",1),w("ngSubmit",function(){h(o);let n=c();return F(n.submitForm())}),m(2,"mat-form-field",2)(3,"mat-label"),s(4),a(),C(5,"input",3),g(6,ye,2,1,"mat-error"),a(),m(7,"div",4)(8,"label"),s(9),a(),m(10,"mat-radio-group",5),V(11,Te,2,2,"mat-radio-button",6,I),a()(),m(13,"div",7)(14,"label"),s(15),a(),C(16,"app-small-counter",8),a(),m(17,"div",7)(18,"label"),s(19),a(),C(20,"app-small-counter",9),a(),m(21,"div",10)(22,"mat-form-field",11)(23,"mat-label"),s(24),a(),m(25,"mat-select",12),V(26,we,2,2,"mat-option",6,I),a()(),C(28,"img",13),a(),m(29,"button",14),s(30),a()(),y()}if(t&2){let o=i.$implicit,e=c();r(),l("formGroup",e.form),r(3),S(o("form.labels.name")),r(2),O(e.form.controls.name.hasError("required")?6:-1),r(3),u(" ",o("form.labels.shootingType")," "),r(2),P(e.ShootingTypeNameMap.entries()),r(4),S(o("form.labels.distance")),r(4),S(o("form.labels.arrowCount")),r(5),S(o("form.labels.targetFace")),r(2),P(e.TargetFaceNameMap.entries()),r(2),l("src",e.TargetFaceImgMap.get(e.form.controls.targetFace.value),G),r(),l("disabled",e.form.invalid),r(),u(" ",o("form.buttons.createSession")," ")}}var he=(()=>{let i=class i{constructor(){this.sessionsDbService=x(J),this.ShootingTypeNameMap=ge,this.TargetFaceNameMap=Se,this.TargetFaceImgMap=_e,this.form=be(),this.formSubmitted=k(),this.initializeFormWithPreviouslyEnteredValues(),this.initSessionName()}initializeFormWithPreviouslyEnteredValues(){return v(this,null,function*(){let e=yield this.sessionsDbService.getLatestSession();if(!e)return;let n={},{shootingType:d,targetFace:R,distance:$,arrowCount:q}=e;_(d)&&(n.shootingType=d),_(R)&&(n.targetFace=R),_($)&&(n.distance=$),_(q)&&(n.arrowCount=q),this.form.patchValue(n,{emitEvent:!1})})}initSessionName(){return v(this,null,function*(){let e=yield H.sessions.count();e&&this.form.controls.name.setValue(`Session ${e+1}`)})}submitForm(){return v(this,null,function*(){if(this.form.invalid)return;let e=this.form.getRawValue(),n=yield this.sessionsDbService.addSession(e);this.formSubmitted.emit(n)})}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=b({type:i,selectors:[["app-create-session-form"]],outputs:{formSubmitted:"formSubmitted"},standalone:!0,features:[N],decls:1,vars:0,consts:[[4,"transloco"],[3,"ngSubmit","formGroup"],[1,"margin-bottom-4x"],["matInput","","formControlName","name"],[1,"flex-column","margin-bottom-4x"],["formControlName","shootingType"],[3,"value"],[1,"flex-column","align-items-start","margin-bottom-4x"],["formControlName","distance","suffix","m","moreIncrements",""],["formControlName","arrowCount"],[1,"flex-row","align-items-center","margin-bottom-4x"],[1,"no-bottom-space"],["formControlName","targetFace"],["width","56","height","56",1,"margin-left-1x",2,"border-radius","5px",3,"src"],["mat-flat-button","","type","submit",1,"margin-top-6x",3,"disabled"]],template:function(n,d){n&1&&g(0,Ne,31,10,"ng-container",0)},dependencies:[D,E,oe,ee,Q,X,Y,te,ie,ue,me,ae,ne,re,xe,ve,z,L,ce,se,le,de,pe,B],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0});let t=i;return t})();function Ee(t,i){if(t&1){let o=T();M(0),m(1,"app-page-with-title",1)(2,"mat-card",2)(3,"mat-card-content")(4,"app-create-session-form",3),w("formSubmitted",function(n){h(o);let d=c();return F(d.onFormDone(n))}),a()()()(),y()}if(t&2){let o=i.$implicit;r(),l("page-title",o("createSession.title"))}}var gt=(()=>{let i=class i{constructor(){this.router=x(W)}onFormDone(e){this.router.navigate(["/sessions",e])}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=b({type:i,selectors:[["app-create-session-page"]],standalone:!0,features:[N],decls:1,vars:0,consts:[[4,"transloco"],["page-back-link","/",3,"page-title"],[1,"standard-centering"],[3,"formSubmitted"]],template:function(n,d){n&1&&g(0,Ee,5,1,"ng-container",0)},dependencies:[D,E,K,he,U,j,A],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let t=i;return t})();export{gt as CreateSessionPageComponent};
