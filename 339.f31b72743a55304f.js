"use strict";(self.webpackChunkarchery_stats=self.webpackChunkarchery_stats||[]).push([[339],{6885:(O,K,d)=>{d.d(K,{a:()=>c,b:()=>g});var c=(()=>((c=c||{}).OLDEST_FIRST="oldest_first",c.NEWEST_FIRST="newest_first",c.HIGHEST_SUM="highest_sum",c.LOWEST_SUM="lowest_sum",c.HIGHEST_AVERAGE="highest_average",c.LOWEST_AVERAGE="lowest_average",c.MOST_ENTRIES="most_entries",c))();const g={[c.OLDEST_FIRST]:"Oldest first",[c.NEWEST_FIRST]:"Newest first",[c.HIGHEST_SUM]:"Highest total first",[c.LOWEST_SUM]:"Lowest total first",[c.HIGHEST_AVERAGE]:"Highest average first",[c.LOWEST_AVERAGE]:"Lowest average first",[c.MOST_ENTRIES]:"Most entries"}},5528:(O,K,d)=>{d.d(K,{E2:()=>E,P1:()=>S,iA:()=>M,pK:()=>g});var c=d(6276);function g(l){return l.entries.map(h=>h.shots.map(y=>y.value))}function E(l){return(0,c.Iz)(l.entries.map(h=>h.shots).flat().map(h=>h.value))}function S(l){const h=l.entries.map(y=>y.shots).flat().map(y=>y.value);return 0===h.length?0:(0,c.Y8)(h)}function M(l){const y=l.map(_=>_.shots.map(w=>w.value)).flat().reduce((_,w)=>(_.set(w,(_.get(w)||0)+1),_),new Map(Array.from({length:11},(_,w)=>[w,0]))),D=y.values();return{asMap:y,asArray:Array.from(D)}}},7697:(O,K,d)=>{d.d(K,{H:()=>ht});var c=d(1331),g=d(9635),E=d(1884),S=d(4004),M=d(3900);function l(e,n){const t={},i=[];for(const s of e){const r=s[n];i.push(r),t[r]=s}return{ids:i,asObject:t}}function _(e,n){return e.config[n.idKeyRef]}class w{constructor(n){this.idKeyRef="idKey",this.entitiesKey=n.entitiesKey,this.idsKey=n.idsKey,this.idKeyRef=n.idKeyRef}}function $(e){const n=e?`idKey${(0,c.kC)(e)}`:"idKey",t=new w({entitiesKey:e?`${e}Entities`:"entities",idsKey:e?`${e}Ids`:"ids",idKeyRef:n});return{[`${e}EntitiesRef`]:t,[`with${(0,c.kC)(e)}Entities`]:function i(s){let r={},o=[];const u=s?.idKey||"id";return s?.initialValue&&({ids:o,asObject:r}=l(s.initialValue,u)),{props:{[t.entitiesKey]:r,[t.idsKey]:o},config:{[n]:u}}}}}const{withEntities:z,EntitiesRef:a}=$("");function B(e,n={}){return function(t,i){const{prepend:s=!1,ref:r=a}=n,{entitiesKey:o,idsKey:u}=r,f=_(i,r),p=(0,c.Eq)(e);if(!p.length)return t;(0,c.r8)()&&(function Y(e,n,t,i){e.forEach(s=>{const r=s[n];if(t[i][r])throw Error(`Entity already exists. ${n} ${r}`)})}(p,f,t,o),function Q(e,n){const t=new Set;e.forEach(i=>{const s=i[n];if(t.has(s))throw Error(`Duplicate entity id provided. ${n} ${s}`);t.add(s)})}(p,f));const{ids:v,asObject:A}=l(p,f);return{...t,[o]:{...t[o],...A},[u]:s?[...v,...t[u]]:[...t[u],...v]}}}function H(e,n={}){return function(t){const{ref:{entitiesKey:i}=a}=n;return t[i][e]}}function L(e,n={}){return function(t){const{ref:{entitiesKey:i}=a}=n;return Reflect.has(t[i],e)}}function V(e,n){return(0,c.mf)(e)?e(n):{...n,...e}}function P(e,n,t={}){return function(i){const{ref:{entitiesKey:s}=a}=t,r={};for(const o of(0,c.Eq)(e))L(o,t)(i)&&(r[o]=V(n,H(o,t)(i)));return{...i,[s]:{...i[s],...r}}}}function U(e){return(0,E.x)((n,t)=>n[e]===t[e])}function G(e,n,t){const i=e[n];if(!(0,c.o8)(i))return t?function D(e,n){return e&&n?(0,c.mf)(n)?n(e):e[n]:e}(i,t):i}$("UI");const{selectActiveId:nt,setActiveId:it,withActiveId:st,resetActiveId:rt,getActiveId:ot}=(0,c.U4)("activeId",{initialValue:void 0});function Z(e={}){const{ref:{entitiesKey:n}=a}=e;return function(t){return t[n][ot(t)]}}(0,c.v8)("activeIds",{initialValue:[]});var x=d(6838),F=d(4782),at=d(9841),b=d(6885),N=d(953),ft=d(833),yt=d(8779),R=d(5528),pt=d(2223);let ht=(()=>{class e{constructor(){this.store=(0,c.MT)({name:"archerySession"},z({initialValue:[]}),st(),(0,c.vl)({sort:null})),(0,x.xi)(this.store,{key:"archery-session",storage:x.n4}),this.sort$=this.store.pipe((0,c.Ys)(t=>t.sort),(0,F.d)({refCount:!0})),this.sessions$=this.store.pipe(function X(e={}){const{ref:{entitiesKey:n,idsKey:t}=a}=e;return(0,g.z)(U(n),(0,S.U)(i=>i[t].map(s=>i[n][s])))}(),(0,F.d)({refCount:!0})),this.activeSession$=this.store.pipe(function ct(e={}){const{ref:n=a}=e;return function(t){return t.pipe(nt()).pipe((0,M.w)(i=>t.pipe(function q(e,n={}){const{ref:{entitiesKey:t}=a,pluck:i}=n;return(0,g.z)(U(t),(0,c.Ys)(s=>G(s[t],e,i)))}(i,{ref:n}))))}}(),(0,F.d)({refCount:!0})),this.sortedSessions$=(0,at.a)([this.sessions$,this.sort$]).pipe((0,S.U)(([t,i])=>{const s=[...t];switch(i){case b.a.NEWEST_FIRST:return s.sort((r,o)=>function lt(e,n){(0,ft.Z)(2,arguments);var t=(0,N.Z)(e),i=(0,N.Z)(n),s=t.getTime()-i.getTime();return s>0?-1:s<0?1:s}(new Date(r.date_created),new Date(o.date_created)));case b.a.OLDEST_FIRST:return s.sort((r,o)=>(0,yt.Z)(new Date(r.date_created),new Date(o.date_created)));case b.a.HIGHEST_SUM:return s.sort((r,o)=>(0,R.E2)(o)-(0,R.E2)(r));case b.a.LOWEST_SUM:return s.sort((r,o)=>(0,R.E2)(r)-(0,R.E2)(o));case b.a.HIGHEST_AVERAGE:return s.sort((r,o)=>(0,R.P1)(o)-(0,R.P1)(r));case b.a.LOWEST_AVERAGE:return s.sort((r,o)=>(0,R.P1)(r)-(0,R.P1)(o));case b.a.MOST_ENTRIES:return s.sort((r,o)=>o.entries.length-r.entries.length);default:return t}}))}setSessions(t){this.store.update(function j(e,n={}){return function(t,i){const{ref:s=a}=n,{entitiesKey:r,idsKey:o}=s,{ids:u,asObject:f}=l(e,_(i,s));return{...t,[r]:f,[o]:u}}}(t))}addSession(t){this.store.update(B(t))}addSessions(t){this.store.update(B(t))}setActiveSession(t){this.store.update(it(t))}resetActiveSession(){this.store.update(rt())}deleteSessions(t){this.store.update(function C(e,n={}){return function(t){const{ref:{idsKey:i,entitiesKey:s}=a}=n,r=(0,c.Eq)(e),o={...t[s]},u=t[i].filter(f=>!r.includes(f));for(const f of r)Reflect.deleteProperty(o,f);return{...t,[s]:o,[i]:u}}}(t))}updateSession(t){this.store.update(P(t.id,t))}setSort(t){this.store.update((0,c.tg)("sort",t))}getSessions(){return this.store.query(function J(e={}){const{ref:{entitiesKey:n,idsKey:t}=a}=e;return function(i){return i[t].map(s=>i[n][s])}}())}getSessionsCount(){return this.store.query(function et(e={}){return function(n){const{ref:{idsKey:t}=a}=e;return n[t].length}}())}getSessionByID(t){return this.store.query(H(t))}getActiveSession(){return this.store.query(Z())}addEntryForActiveSession(t){const i=this.store.query(Z());i&&(i.entries.push(t),this.updateSession(i))}toggleLockForSession(t){t.locked=!t.locked,this.updateSession(t)}changeSessionName(t,i){this.store.update(P(t,{name:i}))}editEntryForSession(t,i){const s=this.getSessionByID(t);if(s){const r=s.entries.findIndex(o=>o.id===i.id);s.entries.splice(r,1,i),this.updateSession(s)}}deleteEntryForSession(t,i){const s=this.getSessionByID(t);s&&(s.entries=s.entries.filter(r=>r.id!==i),this.updateSession(s))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pt.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},833:(O,K,d)=>{function c(g,E){if(E.length<g)throw new TypeError(g+" argument"+(g>1?"s":"")+" required, but only "+E.length+" present")}d.d(K,{Z:()=>c})},8779:(O,K,d)=>{d.d(K,{Z:()=>E});var c=d(953),g=d(833);function E(S,M){(0,g.Z)(2,arguments);var l=(0,c.Z)(S),h=(0,c.Z)(M),y=l.getTime()-h.getTime();return y<0?-1:y>0?1:y}},953:(O,K,d)=>{d.d(K,{Z:()=>E});var c=d(1002),g=d(833);function E(S){(0,g.Z)(1,arguments);var M=Object.prototype.toString.call(S);return S instanceof Date||"object"===(0,c.Z)(S)&&"[object Date]"===M?new Date(S.getTime()):"number"==typeof S||"[object Number]"===M?new Date(S):(("string"==typeof S||"[object String]"===M)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},3630:(O,K,d)=>{d.d(K,{d:()=>S,t:()=>M});var c=d(2223),g=d(1692),E=d(1217);let S=(()=>{class l{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(y){this._vertical=(0,g.Ig)(y)}get inset(){return this._inset}set inset(y){this._inset=(0,g.Ig)(y)}}return l.\u0275fac=function(y){return new(y||l)},l.\u0275cmp=c.Xpm({type:l,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(y,D){2&y&&(c.uIk("aria-orientation",D.vertical?"vertical":"horizontal"),c.ekj("mat-divider-vertical",D.vertical)("mat-divider-horizontal",!D.vertical)("mat-divider-inset",D.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(y,D){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),l})(),M=(()=>{class l{}return l.\u0275fac=function(y){return new(y||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[E.BQ,E.BQ]}),l})()},1002:(O,K,d)=>{function c(g){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(g)}d.d(K,{Z:()=>c})}}]);