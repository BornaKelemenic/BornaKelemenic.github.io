import{a as re,b as ae,c as me,d as se,e as le,f as pe,g as ce,h as de,j as fe,k as ge,l as Ce,m as _e,n as Se,o as be,q as ve,r as xe}from"./chunk-M6ILCPCN.js";import{e as k}from"./chunk-4Y7YEEBZ.js";import{g as K}from"./chunk-DYYN4I6D.js";import{t as g}from"./chunk-IXNTDOOL.js";import{d as ue}from"./chunk-OADQNGHN.js";import"./chunk-GVGWLV5M.js";import{b as z,d as j,h as U}from"./chunk-IPAA2AE6.js";import{a as Q}from"./chunk-EWZH3GJP.js";import{a as A,b as H,e as J,i as X,k as p,m as Y,n as Z,o as ee,q as f,r as te,t as ie,u as oe,v as ne}from"./chunk-CMCV5GXG.js";import{o as G,r as L}from"./chunk-GXK3WLWB.js";import{$a as I,Ea as C,Hc as W,Ja as s,Oa as R,Pa as F,Ra as M,Rc as D,S as v,Sa as T,Sc as V,Ta as r,Ua as n,Va as _,W as x,Wa as w,X as h,Xa as N,Za as E,ab as l,da as q,lb as a,mb as u,nb as d,oa as O,pa as o,ya as y}from"./chunk-VK2UWGYB.js";import{f as b}from"./chunk-EQDQRRRY.js";function he(){return new ee({name:new f("",{nonNullable:!0,validators:[p.required]}),targetFace:new f(_e.FULL,{nonNullable:!0,validators:[p.required]}),distance:new f(20,{nonNullable:!0,validators:[p.required,p.min(1)]}),arrowCount:new f(6,{nonNullable:!0,validators:[p.required,p.min(1)]}),shootingType:new f(ge.INDOOR,{nonNullable:!0,validators:[p.required]}),bowType:new f(A.LONGBOW,{nonNullable:!0,validators:[p.required]})})}function Te(i,m){if(i&1&&(r(0,"mat-error"),a(1),n()),i&2){let e=l().$implicit;o(),d(" ",e("form.validations.fieldRequired")," ")}}function we(i,m){if(i&1&&(r(0,"mat-radio-button",6),a(1),n()),i&2){let e=m.$implicit,t=l().$implicit;s("value",e[0]),o(),d(" ",t(e[1])," ")}}function Ne(i,m){if(i&1&&(r(0,"mat-option",6),a(1),n()),i&2){let e=m.$implicit,t=l().$implicit;s("value",e[0]),o(),d(" ",t(e[1])," ")}}function Ee(i,m){if(i&1&&(r(0,"mat-option",6),a(1),n()),i&2){let e=m.$implicit,t=l().$implicit;s("value",e[0]),o(),d(" ",t(e[1])," ")}}function Ie(i,m){if(i&1){let e=E();w(0),r(1,"form",1),I("ngSubmit",function(){x(e);let c=l();return h(c.submitForm())}),r(2,"mat-form-field",2)(3,"mat-label"),a(4),n(),_(5,"input",3),C(6,Te,2,1,"mat-error"),n(),r(7,"div",4)(8,"label"),a(9),n(),r(10,"mat-radio-group",5),M(11,we,2,2,"mat-radio-button",6,F),n()(),r(13,"div",7)(14,"label"),a(15),n(),_(16,"app-small-counter",8),n(),r(17,"div",7)(18,"label"),a(19),n(),_(20,"app-small-counter",9),n(),r(21,"div",10)(22,"mat-form-field",11)(23,"mat-label"),a(24),n(),r(25,"mat-select",12),M(26,Ne,2,2,"mat-option",6,F),n()(),_(28,"img",13),n(),r(29,"div",2)(30,"mat-form-field")(31,"mat-label"),a(32),n(),r(33,"mat-select",14),M(34,Ee,2,2,"mat-option",6,F),n()()(),r(36,"button",15),a(37),n()(),N()}if(i&2){let e=m.$implicit,t=l();o(),s("formGroup",t.form),o(3),u(e("form.labels.name")),o(2),R(t.form.controls.name.hasError("required")?6:-1),o(3),d(" ",e("form.labels.shootingType")," "),o(2),T(t.ShootingTypeNameMap.entries()),o(4),u(e("form.labels.distance")),o(4),u(e("form.labels.arrowCount")),o(5),u(e("form.labels.targetFace")),o(2),T(t.TargetFaceNameMap.entries()),o(2),s("src",t.TargetFaceImgMap.get(t.form.controls.targetFace.value),O),o(4),u(e("form.labels.bowType")),o(2),T(t.BowTypeNameMap.entries()),o(2),s("disabled",t.form.invalid),o(),d(" ",e("form.buttons.createSession")," ")}}var ye=(()=>{class i{constructor(){this.sessionsDbService=v(K),this.ShootingTypeNameMap=Ce,this.TargetFaceNameMap=Se,this.TargetFaceImgMap=be,this.BowTypeNameMap=H,this.form=he(),this.formSubmitted=q(),this.initializeFormWithPreviouslyEnteredValues(),this.initSessionName()}initializeFormWithPreviouslyEnteredValues(){return b(this,null,function*(){let e=yield this.sessionsDbService.getLatestSession();if(!e)return;let t={},{shootingType:c,targetFace:S,distance:B,arrowCount:P,bowType:$}=e;g(c)&&(t.shootingType=c),g(S)&&(t.targetFace=S),g(B)&&(t.distance=B),g(P)&&(t.arrowCount=P),g($)&&(t.bowType=$),this.form.patchValue(t,{emitEvent:!1})})}initSessionName(){return b(this,null,function*(){let e=yield J.sessions.count();e&&this.form.controls.name.setValue(`Session ${e+1}`)})}submitForm(){return b(this,null,function*(){if(this.form.invalid)return;let e=this.form.getRawValue(),t=yield this.sessionsDbService.addSession(e);this.formSubmitted.emit(t)})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=y({type:i,selectors:[["app-create-session-form"]],outputs:{formSubmitted:"formSubmitted"},decls:1,vars:0,consts:[[4,"transloco"],[3,"ngSubmit","formGroup"],[1,"margin-bottom-4x"],["matInput","","formControlName","name"],[1,"flex-column","margin-bottom-4x"],["formControlName","shootingType"],[3,"value"],[1,"flex-column","align-items-start","margin-bottom-4x"],["formControlName","distance","suffix","m","moreIncrements",""],["formControlName","arrowCount"],[1,"flex-row","align-items-center","margin-bottom-4x"],[1,"no-bottom-space"],["formControlName","targetFace"],["width","56","height","56",1,"margin-left-1x",2,"border-radius","5px",3,"src"],["formControlName","bowType"],["mat-flat-button","","type","submit",1,"margin-top-6x",3,"disabled"]],template:function(t,c){t&1&&C(0,Ie,38,11,"ng-container",0)},dependencies:[V,D,ne,te,X,Y,Z,ie,oe,ue,se,me,re,ae,xe,ve,L,G,ce,le,pe,fe,de,k],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}}return i})();function De(i,m){if(i&1){let e=E();w(0),r(1,"app-page-with-title",1)(2,"mat-card",2)(3,"mat-card-content")(4,"app-create-session-form",3),I("formSubmitted",function(c){x(e);let S=l();return h(S.onFormDone(c))}),n()()()(),N()}if(i&2){let e=m.$implicit;o(),s("page-title",e("createSession.title"))}}var _t=(()=>{class i{constructor(){this.router=v(W)}onFormDone(e){this.router.navigate(["/sessions",e])}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=y({type:i,selectors:[["app-create-session-page"]],decls:1,vars:0,consts:[[4,"transloco"],["page-back-link","/",3,"page-title"],[1,"standard-centering"],[3,"formSubmitted"]],template:function(t,c){t&1&&C(0,De,5,1,"ng-container",0)},dependencies:[V,D,Q,ye,U,z,j],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}}return i})();export{_t as CreateSessionPageComponent};
