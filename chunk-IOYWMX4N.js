import{c as we,d as me,f as Y,g as ce}from"./chunk-C5P3YSZX.js";import{b as _t,c as ht,d as bt,e as ue,f as jt,g as Ut,h as Gt}from"./chunk-OMVQ2KIW.js";import"./chunk-2RNSCSN7.js";import{a as $t,c as Bt,d as kt,e as Lt,f as Rt,g as zt,h as At,i as Vt,j as Pt,k as Ot,l as fe,n as _e,o as he}from"./chunk-M6ILCPCN.js";import{e as at}from"./chunk-4Y7YEEBZ.js";import{a as be,b as ve,c as ye,d as Se}from"./chunk-I45RLXS3.js";import{c as pe,d as dt,e as gt,f as ut,g as ft,h as W,i as qt}from"./chunk-CMHFBDCQ.js";import"./chunk-SGYCFQGT.js";import{a as xt,b as Ct,e as ge,f as Tt,g as Z}from"./chunk-DYYN4I6D.js";import{t as Mt}from"./chunk-IXNTDOOL.js";import{a as vt,b as yt,c as Ht}from"./chunk-JMHVFYCZ.js";import{d as Nt}from"./chunk-OADQNGHN.js";import"./chunk-GVGWLV5M.js";import{a as Ze,f as Ke,h as q,i as U,k as Qe,l as lt,m as mt}from"./chunk-DIZWGUJA.js";import{a as Dt}from"./chunk-EWZH3GJP.js";import{b as de,c as St,k as Et,m as wt,q as J,s as Ft,v as It}from"./chunk-CMCV5GXG.js";import{m as re,o as se,p as le,q as rt,r as L}from"./chunk-GXK3WLWB.js";import{$a as y,Aa as ne,Bc as ot,E as I,Ea as u,Eb as H,Ec as Ee,G as Re,Gb as Ge,H as K,Hb as Ye,Ib as We,Ic as st,Ja as p,Ka as He,Kb as Je,La as oe,Nc as R,O as ze,Oa as E,Oc as ct,P as Ae,Pa as j,Qc as pt,Ra as B,Rb as G,Rc as T,S as m,Sa as k,Sc as D,Ta as a,Ua as r,Va as h,W as b,Wa as S,X as v,Xa as x,Xb as ae,Xc as z,Yc as A,Za as w,aa as te,ab as c,ca as Ve,da as Pe,ea as $,fa as ie,ha as Te,j as Be,ka as Ne,kb as Q,lb as s,lc as Xe,m as ee,mb as g,mc as et,n as Me,nb as d,ob as De,pa as o,pb as C,qb as N,r as ke,rb as O,rc as tt,sa as Oe,ub as qe,uc as it,vb as M,vc as nt,wb as F,xb as Ue,ya as _,z as Le,za as je}from"./chunk-VK2UWGYB.js";import{a as $e,f as Ce}from"./chunk-EQDQRRRY.js";var Yt="mat-badge-content",ni=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=_({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(i,n){},styles:[`.mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-sys-error));color:var(--mat-badge-text-color, var(--mat-sys-on-error));font-family:var(--mat-badge-text-font, var(--mat-sys-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-sys-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-sys-corner-full))}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}@media(forced-colors: active){.mat-badge-content{outline:solid 1px;border-radius:0}}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-error) 38%, transparent));color:var(--mat-badge-disabled-state-text-color, var(--mat-sys-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, 6px);min-height:var(--mat-badge-small-size-container-size, 6px);line-height:var(--mat-badge-small-size-line-height, 6px);padding:var(--mat-badge-small-size-container-padding, 0);font-size:var(--mat-badge-small-size-text-size, 0);margin:var(--mat-badge-small-size-container-offset, -6px 0)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset, -6px)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, 16px);min-height:var(--mat-badge-container-size, 16px);line-height:var(--mat-badge-line-height, 16px);padding:var(--mat-badge-container-padding, 0 4px);font-size:var(--mat-badge-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-container-offset, -12px 0)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset, -12px)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, 16px);min-height:var(--mat-badge-large-size-container-size, 16px);line-height:var(--mat-badge-large-size-line-height, 16px);padding:var(--mat-badge-large-size-container-padding, 0 4px);font-size:var(--mat-badge-large-size-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-large-size-container-offset, -12px 0)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset, -12px)}
`],encapsulation:2,changeDetection:0})}return t})(),Wt=(()=>{class t{_ngZone=m(Ve);_elementRef=m(ie);_ariaDescriber=m(ot);_renderer=m(Oe);_animationMode=m(Ne,{optional:!0});_idGenerator=m(nt);get color(){return this._color}set color(e){this._setColor(e),this._color=e}_color="primary";overlap=!0;disabled;position="above after";get content(){return this._content}set content(e){this._updateRenderedContent(e)}_content;get description(){return this._description}set description(e){this._updateDescription(e)}_description;size="medium";hidden;_badgeElement;_inlineBadgeDescription;_isInitialized=!1;_interactivityChecker=m(tt);_document=m(Je);constructor(){let e=m(Xe);e.load(ni),e.load(et)}isAbove(){return this.position.indexOf("below")===-1}isAfter(){return this.position.indexOf("before")===-1}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){let e=this._renderer.createElement("span"),i="mat-badge-active";return e.setAttribute("id",this._idGenerator.getId("mat-badge-content-")),e.setAttribute("aria-hidden","true"),e.classList.add(Yt),this._animationMode==="NoopAnimations"&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),typeof requestAnimationFrame=="function"&&this._animationMode!=="NoopAnimations"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(i)})}):e.classList.add(i),e}_updateRenderedContent(e){let i=`${e??""}`.trim();this._isInitialized&&i&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=i),this._content=i}_updateDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!e||this._isHostInteractive())&&this._removeInlineDescription(),this._description=e,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,e):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(e){let i=this._elementRef.nativeElement.classList;i.remove(`mat-badge-${this._color}`),e&&i.add(`mat-badge-${e}`)}_clearExistingBadges(){let e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${Yt}`);for(let i of Array.from(e))i!==this._badgeElement&&i.remove()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ne({type:t,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(i,n){i&2&&oe("mat-badge-overlap",n.overlap)("mat-badge-above",n.isAbove())("mat-badge-below",!n.isAbove())("mat-badge-before",!n.isAfter())("mat-badge-after",n.isAfter())("mat-badge-small",n.size==="small")("mat-badge-medium",n.size==="medium")("mat-badge-large",n.size==="large")("mat-badge-hidden",n.hidden||!n.content)("mat-badge-disabled",n.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",H],disabled:[2,"matBadgeDisabled","disabled",H],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",H]}})}return t})(),Zt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=Ae({imports:[it,Ee,Ee]})}return t})();var ai={sortBy:ge.NEWEST_FIRST,targetFace:null,shootingType:null,distance:null,bowType:null},Kt="archery-stats-session-filters",P=(()=>{class t{constructor(){this.store=Ke({name:Kt},Qe(ai)),lt(this.store,{key:Kt,storage:mt}),this.sortBy$=this.store.pipe(U(e=>e.sortBy),I({refCount:!0,bufferSize:1})),this.targetFace$=this.store.pipe(U(e=>e.targetFace),I({refCount:!0,bufferSize:1})),this.shootingType$=this.store.pipe(U(e=>e.shootingType),I({refCount:!0,bufferSize:1})),this.bowType$=this.store.pipe(U(e=>e.bowType),I({refCount:!0,bufferSize:1})),this.distance$=this.store.pipe(U(e=>e.distance),I({refCount:!0,bufferSize:1})),this.filters$=Me({sortBy:this.sortBy$,targetFace:this.targetFace$,shootingType:this.shootingType$,bowType:this.bowType$,distance:this.distance$}).pipe(I({refCount:!0,bufferSize:1})),this.activeFiltersCount$=Me({targetFace:this.targetFace$,shootingType:this.shootingType$,bowType:this.bowType$,distance:this.distance$}).pipe(ee(e=>{let i=0;return Object.values(e).forEach(n=>{Mt(n)&&i++}),i}),I({refCount:!0,bufferSize:1}))}setSortBy(e){this.store.update(q("sortBy",e))}setTargetFace(e){this.store.update(q("targetFace",e))}setShootingType(e){this.store.update(q("shootingType",e))}setBowType(e){this.store.update(q("bowType",e))}setDistance(e){this.store.update(q("distance",e))}getStoreProp(e){return this.store.getValue()[e]}resetAll(){this.store.reset()}resetOnlyFilters(){Ze(()=>{let e=this.getStoreProp("sortBy");this.resetAll(),this.setSortBy(e)})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=ze({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ri(t,l){if(t&1&&(a(0,"mat-radio-button",3),s(1),r()),t&2){let e=l.$implicit,i=c().$implicit;p("value",e[0]),o(),d(" ",i(e[1])," ")}}function si(t,l){if(t&1&&(h(0,"img",8),a(1,"span",9),s(2),r()),t&2){let e=c().$implicit,i=c();p("ngSrc",i.TargetFaceImgMap.get(i.targetFaceControl.value)),o(2),d(" ",e(i.TargetFaceNameMap.get(i.targetFaceControl.value))," ")}}function li(t,l){if(t&1&&s(0),t&2){let e=c().$implicit;d(" ",e("generic.all")," ")}}function mi(t,l){if(t&1&&(C(0)(1),a(2,"mat-option",3),h(3,"img",8),a(4,"span",9),s(5),r()()),t&2){let e=l.$implicit,i=c().$implicit,n=c(),f=e[0],xe=e[1];o(2),p("value",f),o(),p("ngSrc",n.TargetFaceImgMap.get(f)),o(2),d(" ",i(xe)," ")}}function ci(t,l){if(t&1&&(C(0)(1),a(2,"mat-option",3),s(3),r()),t&2){let e=l.$implicit,i=c().$implicit,n=e[0],f=e[1];o(2),p("value",n),o(),d(" ",i(f)," ")}}function pi(t,l){if(t&1&&(S(0),a(1,"div",1)(2,"label"),s(3),r(),a(4,"mat-radio-group",2)(5,"mat-radio-button",3),s(6),r(),B(7,ri,2,2,"mat-radio-button",3,j),r()(),a(9,"mat-form-field",4)(10,"mat-label"),s(11),r(),a(12,"mat-select",2)(13,"mat-select-trigger"),u(14,si,3,2)(15,li,1,1),r(),a(16,"mat-option",5),s(17),r(),B(18,mi,6,3,"mat-option",3,j),r()(),a(20,"mat-form-field",4)(21,"mat-label"),s(22),r(),a(23,"mat-select",2)(24,"mat-option",5),s(25),r(),B(26,ci,4,2,"mat-option",3,j),r()(),a(28,"div",6)(29,"label"),s(30),r(),h(31,"app-small-counter",7),r(),x()),t&2){let e=l.$implicit,i=c();o(3),d(" ",e("form.labels.shootingType"),": "),o(),p("formControl",i.shootingTypeControl),o(),p("value",null),o(),g(e("generic.all")),o(),k(i.ShootingTypeNameMap.entries()),o(4),g(e("form.labels.targetFace")),o(),p("formControl",i.targetFaceControl),o(2),E(i.targetFaceControl.value!=="all"?14:15),o(3),g(e("generic.all")),o(),k(i.TargetFaceNameMap.entries()),o(4),g(e("form.labels.bowType")),o(),p("formControl",i.bowTypeControl),o(2),g(e("generic.all")),o(),k(i.BowTypeNameMap.entries()),o(4),g(e("form.labels.distance")),o(),p("formControl",i.distanceControl)}}var Qt=(()=>{class t{constructor(){this.destroyRef=m(te),this.sessionFiltersRepo=m(P),this.TargetFaceNameMap=_e,this.TargetFaceImgMap=he,this.ShootingType=Ot,this.ShootingTypeNameMap=fe,this.BowTypeNameMap=de,this.targetFaceControl=new J(this.sessionFiltersRepo.getStoreProp("targetFace")??"all",{nonNullable:!0}),this.shootingTypeControl=new J(this.sessionFiltersRepo.getStoreProp("shootingType")),this.bowTypeControl=new J(this.sessionFiltersRepo.getStoreProp("bowType")??"all",{nonNullable:!0}),this.distanceControl=new J(this.sessionFiltersRepo.getStoreProp("distance"),{nonNullable:!0,validators:[Et.min(0)]}),this.listenToRepoValueChanges(),this.setupControlValueChangeListeners()}listenToRepoValueChanges(){this.sessionFiltersRepo.filters$.pipe(R(this.destroyRef)).subscribe(({targetFace:e,shootingType:i,distance:n,bowType:f})=>{this.targetFaceControl.setValue(e??"all",{emitEvent:!1}),this.shootingTypeControl.setValue(i,{emitEvent:!1}),this.bowTypeControl.setValue(f??"all",{emitEvent:!1}),this.distanceControl.setValue(n,{emitEvent:!1})})}setupControlValueChangeListeners(){this.targetFaceControl.valueChanges.pipe(R(this.destroyRef)).subscribe(e=>this.sessionFiltersRepo.setTargetFace(e==="all"?null:e)),this.shootingTypeControl.valueChanges.pipe(R(this.destroyRef)).subscribe(e=>this.sessionFiltersRepo.setShootingType(e)),this.bowTypeControl.valueChanges.pipe(R(this.destroyRef)).subscribe(e=>this.sessionFiltersRepo.setBowType(e==="all"?null:e)),this.distanceControl.valueChanges.pipe(R(this.destroyRef)).subscribe(e=>this.sessionFiltersRepo.setDistance(e===0?null:e))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=_({type:t,selectors:[["app-session-filters"]],decls:1,vars:0,consts:[[4,"transloco"],[1,"flex-column","margin-bottom-4x"],[3,"formControl"],[3,"value"],[1,"margin-bottom-4x"],["value","all"],[1,"flex-column","align-items-start"],["suffix","m","moreIncrements","",3,"formControl"],["width","30","height","30",2,"vertical-align","middle",3,"ngSrc"],[1,"margin-left-2x"]],template:function(i,n){i&1&&u(0,pi,32,13,"ng-container",0)},dependencies:[It,wt,Ft,ae,D,T,Nt,zt,Lt,Rt,Pt,Bt,$t,At,Vt,at,kt],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}}return t})();function di(t,l){if(t&1){let e=w();S(0),a(1,"h2",1),s(2),r(),a(3,"mat-dialog-content"),h(4,"app-session-filters"),r(),a(5,"mat-dialog-actions")(6,"button",2),s(7),r(),h(8,"span",3),a(9,"button",4),y("click",function(){b(e);let n=c();return v(n.sessionFiltersRepo.resetOnlyFilters())}),s(10),r()(),x()}if(t&2){let e=l.$implicit;o(2),d(" ",e("session.dialogs.filtersDialog.title")," "),o(5),d(" ",e("generic.close")," "),o(3),d(" ",e("generic.resetFilters")," ")}}var Jt=(()=>{class t{constructor(){this.sessionFiltersRepo=m(P)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=_({type:t,selectors:[["app-session-filters-dialog"]],decls:1,vars:0,consts:[[4,"transloco"],["mat-dialog-title",""],["mat-button","","type","button","mat-dialog-close",""],[1,"spacer"],["mat-button","","color","warn",3,"click"]],template:function(i,n){i&1&&u(0,di,11,3,"ng-container",0)},dependencies:[D,T,Qt,W,dt,gt,ft,ut,L,se],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}}return t})();function ui(t,l){if(t&1){let e=w();a(0,"button",7),y("click",function(n){return b(e),n.preventDefault(),v(n.stopPropagation())}),a(1,"mat-icon"),s(2),r()()}if(t&2){c();let e=Q(4),i=c();p("matMenuTriggerFor",e),o(2),g(i.$icon())}}function fi(t,l){if(t&1){let e=w();a(0,"button",8),y("click",function(n){return b(e),n.preventDefault(),v(n.stopPropagation())}),a(1,"mat-icon"),s(2),r()()}if(t&2){c();let e=Q(4),i=c();p("matMenuTriggerFor",e),o(2),g(i.$icon())}}function _i(t,l){if(t&1){let e=w();S(0),u(1,ui,3,2,"button",2)(2,fi,3,2,"button",3),a(3,"mat-menu",null,0)(5,"button",4),y("click",function(){b(e);let n=c();return v(n.toggleLock())}),a(6,"mat-icon"),s(7),r(),a(8,"span"),s(9),r()(),a(10,"button",5),y("click",function(){b(e);let n=c();return v(n.openEditDialog())}),a(11,"mat-icon"),s(12,"edit"),r(),a(13,"span"),s(14),r()(),a(15,"button",4),y("click",function(){b(e);let n=c();return v(n.deleteSession())}),a(16,"mat-icon",6),s(17,"delete"),r(),a(18,"span"),s(19),r()()(),x()}if(t&2){let e,i=l.$implicit,n=c();o(),E((e=n.$buttonType())==="icon"?1:e==="fab"?2:-1),o(6),g(n.$isSessionLocked()?"lock":"lock_open"),o(2),d(" ",n.$isSessionLocked()?i("session.actions.pressToUnlock"):i("session.actions.pressToLock")," "),o(),p("disabled",n.$isSessionLocked()),o(4),g(i("session.actions.editSession")),o(5),g(i("session.actions.deleteSession"))}}var Xt=(()=>{class t{constructor(){this.sessionsDbService=m(Z),this.dialog=m(pe),this.transloco=m(pt),this.appStateRepo=m(ue),this.soundboard=m(Ut),this.$isSessionLocked=Ye(()=>Ct(this.$session().locked)),this.$session=$.required({alias:"session"}),this.$icon=$("more_vert",{alias:"icon-name"}),this.$buttonType=$("icon",{alias:"button-type"}),this.sessionDeleted=Pe()}deleteSession(){this.dialog.open(qt,{width:"500px",data:{text:this.transloco.translate("session.dialogs.deleteDialog.text")}}).afterClosed().pipe(Le(1)).subscribe(i=>Ce(this,null,function*(){i&&(yield this.sessionsDbService.deleteSession(this.$session().id),this.appStateRepo.setLastVisitedSession(null),this.sessionDeleted.emit())}))}openEditDialog(){this.dialog.open(Gt,{width:"500px",data:{sessionId:this.$session().id}})}toggleLock(){return Ce(this,null,function*(){this.soundboard.play(this.$isSessionLocked()?"unlock":"lock"),yield this.sessionsDbService.updateSession(this.$session().id,{locked:xt(!this.$isSessionLocked())})})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=_({type:t,selectors:[["app-session-options-menu"]],inputs:{$session:[1,"session","$session"],$icon:[1,"icon-name","$icon"],$buttonType:[1,"button-type","$buttonType"]},outputs:{sessionDeleted:"sessionDeleted"},decls:1,vars:0,consts:[["menu","matMenu"],[4,"transloco"],["mat-icon-button","","type","button",3,"matMenuTriggerFor"],["mat-fab","","type","button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click","disabled"],["color","warn"],["mat-icon-button","","type","button",3,"click","matMenuTriggerFor"],["mat-fab","","type","button",3,"click","matMenuTriggerFor"]],template:function(i,n){i&1&&u(0,_i,20,6,"ng-container",1)},dependencies:[D,T,L,re,le,A,z,Se,ve,be,ye,W],styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}}return t})();function hi(t,l){t&1&&(a(0,"mat-icon"),s(1,"lock"),r())}function bi(t,l){if(t&1&&(S(0),C(1),h(2,"img",1),a(3,"div",2)(4,"span",3),s(5),u(6,hi,2,0,"mat-icon"),r(),a(7,"small"),s(8),M(9,"date"),M(10,"dateDistance"),r(),a(11,"div",4)(12,"small"),s(13),r(),a(14,"small"),s(15,"\u2022"),r(),a(16,"small"),s(17),r(),a(18,"small"),s(19,"\u2022"),r(),a(20,"small"),s(21),r(),a(22,"small"),s(23,"\u2022"),r(),a(24,"small"),s(25),M(26,"async"),r(),a(27,"small"),s(28,"\u2022"),r(),a(29,"small"),s(30),r(),a(31,"small"),s(32),M(33,"async"),r(),a(34,"small"),s(35,"\u2022"),r(),a(36,"small"),s(37),r(),a(38,"small"),s(39),M(40,"async"),r()()(),h(41,"app-session-options-menu",5),x()),t&2){let e=l.$implicit,i=c(),n=i.$session();o(2),p("ngSrc",i.TargetFaceImgMap.get(n.targetFace)),o(3),d(" ",n.name," "),o(),E(n.locked?6:-1),o(2),De(" ",Ue(9,15,n.date,"short")," (",F(10,18,n.date),") "),o(5),g(e(i.BowTypeNameMap.get(n.bowType))),o(4),g(e(i.ShootingTypeNameMap.get(n.shootingType))),o(4),d("",n.distance,"m"),o(4),De("",e("session.info.rounds"),": ",F(26,20,i.roundCount$),""),o(5),d("",e("session.info.avg"),":"),o(2),g(F(33,22,i.avgScore$)),o(5),d("",e("session.info.total"),":"),o(2),g(F(40,24,i.shotsTotal$)),o(2),p("session",n)}}var ei=(()=>{class t{constructor(){this.sessionsDbService=m(Z),this.TargetFaceNameMap=_e,this.TargetFaceImgMap=he,this.ShootingTypeNameMap=fe,this.BowTypeNameMap=de,this.roundCount$=Be(St(()=>this.sessionsDbService.getRoundsCountBySessionId(this.$session().id))),this.$session=$.required({alias:"session"}),this.session$=ct(this.$session).pipe(I({refCount:!0,bufferSize:1})),this.shotsTotal$=this.session$.pipe(K(e=>this.sessionsDbService.getTotalScoreBySessionID$(e.id))),this.avgScore$=this.session$.pipe(K(e=>this.sessionsDbService.getAverageScoreBySessionID$(e.id)))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=_({type:t,selectors:[["app-session-list-item"]],inputs:{$session:[1,"session","$session"]},decls:1,vars:0,consts:[[4,"transloco"],["alt","Target face","width","50","height","50",2,"border-radius","5px",3,"ngSrc"],[1,"flex-column","align-items-start"],[1,"session-name"],[1,"session-info"],[3,"session"]],template:function(i,n){i&1&&u(0,bi,42,26,"ng-container",0)},dependencies:[G,D,T,ae,Ht,jt,Xt,A,z],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:50px minmax(0,1fr) 40px;align-items:center;justify-content:flex-start;gap:var(--spacing-3x);padding:var(--spacing-2x)}.session-name[_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:var(--spacing-1x);font-size:1.25em}.session-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;column-gap:var(--spacing-1x)}"],changeDetection:0})}}return t})();function vi(t,l){t&1&&(a(0,"mat-icon",5),s(1,"radio_button_checked"),r())}function yi(t,l){t&1&&(a(0,"mat-icon"),s(1,"radio_button_unchecked"),r())}function Si(t,l){if(t&1){let e=w();C(0)(1),a(2,"button",4),y("click",function(){b(e);let n=O(0),f=c(2);return v(f.sessionFiltersRepo.setSortBy(n))}),u(3,vi,2,0,"mat-icon",5)(4,yi,2,0,"mat-icon"),a(5,"span"),s(6),r()()}if(t&2){let e=l.$implicit,i=c().$implicit,n=O(1),f=N(e[0]),xe=e[1];o(3),E(n===f?3:4),o(3),g(i(xe))}}function xi(t,l){if(t&1&&(S(0),C(1),M(2,"async"),a(3,"button",2)(4,"mat-icon"),s(5,"sort"),r(),s(6),r(),a(7,"mat-menu",null,0),B(9,Si,7,3,"button",3,j),r(),x()),t&2){let e=l.$implicit,i=Q(8),n=c();o();let f=N(F(2,2,n.sessionFiltersRepo.sortBy$));o(2),p("matMenuTriggerFor",i),o(3),d(" ",e(n.SessionSortLabelMap.get(f))," "),o(3),k(n.SessionSortLabelMap.entries())}}var ti=(()=>{class t{constructor(){this.sessionFiltersRepo=m(P),this.SessionSort=ge,this.SessionSortLabelMap=Tt}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=_({type:t,selectors:[["app-session-sort-menu"]],decls:1,vars:0,consts:[["menu","matMenu"],[4,"transloco"],["mat-button","","type","button",3,"matMenuTriggerFor"],["mat-menu-item",""],["mat-menu-item","",3,"click"],["color","primary"]],template:function(i,n){i&1&&u(0,xi,11,5,"ng-container",1)},dependencies:[G,D,T,Se,ve,be,ye,L,se,A,z],styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}}return t})();var ii=(()=>{class t{constructor(){this.elementRef=m(ie),this.$appScrollIntoView=$.required({alias:"appScrollIntoView",transform:H}),this.$scrollDelay=$(100,{alias:"scrollDelay"}),We(()=>{this.$appScrollIntoView()&&Ge(()=>{setTimeout(()=>{this.elementRef.nativeElement.scrollIntoView({behavior:"smooth"})},this.$scrollDelay())})})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=ne({type:t,selectors:[["","appScrollIntoView",""]],hostVars:2,hostBindings:function(i,n){i&2&&He("scroll-margin","56px")},inputs:{$appScrollIntoView:[1,"appScrollIntoView","$appScrollIntoView"],$scrollDelay:[1,"scrollDelay","$scrollDelay"]}})}}return t})();var Ci=t=>["/sessions",t],Mi=(t,l)=>l.id;function Ti(t,l){t&1&&h(0,"mat-divider",11)}function Di(t,l){if(t&1&&(a(0,"a",9),h(1,"app-session-list-item",10),r(),u(2,Ti,1,0,"mat-divider",11)),t&2){let e=l.$implicit,i=l.$index,n=l.$count;c(2);let f=O(2);p("routerLink",qe(6,Ci,e.id))("appScrollIntoView",i>=3&&f===e.id),o(),oe("active",f===e.id),p("session",e),o(),E(i!==n-1?2:-1)}}function Ei(t,l){if(t&1&&(a(0,"h5",6),s(1),r()),t&2){let e=c().$implicit;o(),d(" ",e("sessionsList.noSessions")," ")}}function wi(t,l){if(t&1){let e=w();a(0,"button",12),y("click",function(){b(e);let n=c(2);return v(n.scrollToTop())}),a(1,"mat-icon"),s(2,"keyboard_arrow_up"),r()()}t&2&&p("@scrollToTopButtonAnimation",void 0)}function Fi(t,l){if(t&1){let e=w();S(0),a(1,"app-page-with-title",1)(2,"button",2),y("click",function(){b(e);let n=c();return v(n.openFiltersDialog())}),a(3,"mat-icon",3),s(4,"tune"),r()(),a(5,"div",4)(6,"div",5),h(7,"app-session-sort-menu"),r(),B(8,Di,3,8,null,null,Mi,!1,Ei,2,1,"h5",6),M(11,"async"),r(),u(12,wi,3,1,"button",7),a(13,"button",8)(14,"mat-icon"),s(15,"add"),r()()(),x()}if(t&2){let e=l.$implicit,i=c(),n=O(0),f=O(4);o(),p("page-title",e("sessionsList.title")),o(),p("matTooltip",e("generic.filters"))("matBadge",n)("matBadgeHidden",!n),o(),p("color",n?"primary":""),o(5),k(F(11,7,i.sessions$)),o(4),E(f?12:-1)}}var aa=(()=>{class t{constructor(){this.destroyRef=m(te),this.dialog=m(pe),this.sessionsDbService=m(Z),this.appStateRepo=m(ue),this.sessionFiltersRepo=m(P),this.sessions$=this.sessionFiltersRepo.filters$.pipe(K(e=>this.sessionsDbService.getFilteredSessions($e({},e)))),this.$mainElement=Te(null),this.$showScrollToTopButton=Te(!1)}ngAfterViewInit(){let e=document.querySelector("main");e&&(this.$mainElement.set(e),ke(e,"scroll").pipe(ee(()=>e.scrollTop),Re(e.scrollTop),R(this.destroyRef)).subscribe({next:i=>{this.$showScrollToTopButton.set(i>100)}}))}scrollToTop(){this.$mainElement()?.scrollTo({top:0,behavior:"smooth"})}openFiltersDialog(){this.dialog.open(Jt,{width:"500px"})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=_({type:t,selectors:[["app-session-list-page"]],decls:6,vars:7,consts:[[4,"transloco"],[3,"page-title"],["mat-icon-button","","page-action","",3,"click","matTooltip","matBadge","matBadgeHidden"],[3,"color"],[1,"standard-centering"],[1,"margin-bottom-2x"],[1,"text-center","margin-top-6x"],["mat-mini-fab","",1,"fab-bottom-center"],["mat-fab","","routerLink","/create",1,"fab-bottom-right"],[3,"routerLink","appScrollIntoView"],[3,"session"],[1,"margin-y-4x"],["mat-mini-fab","",1,"fab-bottom-center",3,"click"]],template:function(i,n){i&1&&(C(0),M(1,"async"),C(2),M(3,"async"),C(4),u(5,Fi,16,9,"ng-container",0)),i&2&&(N(F(1,0,n.sessionFiltersRepo.activeFiltersCount$)),o(2),N(F(3,3,n.appStateRepo.lastVisitedSession$)),o(2),N(n.$showScrollToTopButton()))},dependencies:[G,st,D,T,ei,Dt,ti,ii,L,re,rt,le,A,z,_t,W,bt,ht,Zt,Wt,yt,vt],styles:["[_nghost-%COMP%]{display:block;padding-bottom:var(--spacing-fab-clearance)}a[_ngcontent-%COMP%]{display:block}app-session-list-item.active[_ngcontent-%COMP%]{color:var(--mat-sys-primary)}mat-divider[_ngcontent-%COMP%]{--mat-divider-color: #2e2e2c}"],data:{animation:[we("scrollToTopButtonAnimation",[ce(":enter",[Y({opacity:0}),me("150ms ease-in-out",Y({opacity:1}))]),ce(":leave",[Y({opacity:1}),me("150ms ease-in-out",Y({opacity:0}))])])]},changeDetection:0})}}return t})();export{aa as SessionListPageComponent};
