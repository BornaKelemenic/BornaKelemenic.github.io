import{a as ie,b as ne,c as re,d as ae,e as me,f as se,g as le,h as ce,j as pe,k as ue,l as fe,m as ge,n as Ce,o as Se,q as _e,r as ve}from"./chunk-KJZIKPQE.js";import{g as H}from"./chunk-ASWZLOHO.js";import{F as S}from"./chunk-RVVXJ2F4.js";import{a as de}from"./chunk-MLDSC6UT.js";import{b as W,d as j,h as A}from"./chunk-5M6SDQAB.js";import{a as J}from"./chunk-YHEBO5DW.js";import{c as U,g as K,i as p,k as Q,l as X,m as Y,o as u,p as Z,r as ee,s as te,t as oe}from"./chunk-U6CN3XCF.js";import{a as B,e as L}from"./chunk-LTQDWN26.js";import{$a as g,Bb as N,Ka as f,Pa as l,Ua as G,Va as I,Xa as V,Ya as P,Z as x,Za as r,_ as b,_a as n,ab as M,bb as y,db as T,f as v,fa as h,fd as O,ga as F,gb as w,ib as c,nd as z,oa as q,tb as a,ua as k,ub as C,va as i,vb as d,xd as E,yd as D}from"./chunk-DH4MWFWR.js";function xe(){return new Y({name:new u("",{nonNullable:!0,validators:[p.required]}),targetFace:new u(ge.FULL,{nonNullable:!0,validators:[p.required]}),distance:new u(20,{nonNullable:!0,validators:[p.required,p.min(1)]}),arrowCount:new u(6,{nonNullable:!0,validators:[p.required,p.min(1)]}),shootingType:new u(ue.INDOOR,{nonNullable:!0,validators:[p.required]})})}function Me(o,m){if(o&1&&(r(0,"mat-error"),a(1),n()),o&2){let e=c().$implicit;i(),d(" ",e("form.validations.fieldRequired")," ")}}function ye(o,m){if(o&1&&(r(0,"mat-radio-button",6),a(1),n()),o&2){let e=m.$implicit,t=c().$implicit;l("value",e[0]),i(),d(" ",t(e[1])," ")}}function Te(o,m){if(o&1&&(r(0,"mat-option",6),a(1),n()),o&2){let e=m.$implicit,t=c().$implicit;l("value",e[0]),i(),d(" ",t(e[1])," ")}}function we(o,m){if(o&1){let e=T();M(0),r(1,"form",1),w("ngSubmit",function(){h(e);let s=c();return F(s.submitForm())}),r(2,"mat-form-field",2)(3,"mat-label"),a(4),n(),g(5,"input",3),f(6,Me,2,1,"mat-error"),n(),r(7,"div",4)(8,"label"),a(9),n(),r(10,"mat-radio-group",5),V(11,ye,2,2,"mat-radio-button",6,I),n()(),r(13,"div",7)(14,"label"),a(15),n(),g(16,"app-small-counter",8),n(),r(17,"div",7)(18,"label"),a(19),n(),g(20,"app-small-counter",9),n(),r(21,"div",10)(22,"mat-form-field",11)(23,"mat-label"),a(24),n(),r(25,"mat-select",12),V(26,Te,2,2,"mat-option",6,I),n()(),g(28,"img",13),n(),r(29,"button",14),a(30),n()(),y()}if(o&2){let e=m.$implicit,t=c();i(),l("formGroup",t.form),i(3),C(e("form.labels.name")),i(2),G(t.form.controls.name.hasError("required")?6:-1),i(3),d(" ",e("form.labels.shootingType")," "),i(2),P(t.ShootingTypeNameMap.entries()),i(4),C(e("form.labels.distance")),i(4),C(e("form.labels.arrowCount")),i(5),C(e("form.labels.targetFace")),i(2),P(t.TargetFaceNameMap.entries()),i(2),l("src",t.TargetFaceImgMap.get(t.form.controls.targetFace.value),k),i(),l("disabled",t.form.invalid),i(),d(" ",e("form.buttons.createSession")," ")}}var be=(()=>{class o{constructor(){this.sessionsDbService=x(H),this.ShootingTypeNameMap=fe,this.TargetFaceNameMap=Ce,this.TargetFaceImgMap=Se,this.form=xe(),this.formSubmitted=q(),this.initializeFormWithPreviouslyEnteredValues(),this.initSessionName()}initializeFormWithPreviouslyEnteredValues(){return v(this,null,function*(){let e=yield this.sessionsDbService.getLatestSession();if(!e)return;let t={},{shootingType:s,targetFace:_,distance:R,arrowCount:$}=e;S(s)&&(t.shootingType=s),S(_)&&(t.targetFace=_),S(R)&&(t.distance=R),S($)&&(t.arrowCount=$),this.form.patchValue(t,{emitEvent:!1})})}initSessionName(){return v(this,null,function*(){let e=yield U.sessions.count();e&&this.form.controls.name.setValue(`Session ${e+1}`)})}submitForm(){return v(this,null,function*(){if(this.form.invalid)return;let e=this.form.getRawValue(),t=yield this.sessionsDbService.addSession(e);this.formSubmitted.emit(t)})}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=b({type:o,selectors:[["app-create-session-form"]],outputs:{formSubmitted:"formSubmitted"},standalone:!0,features:[N],decls:1,vars:0,consts:[[4,"transloco"],[3,"ngSubmit","formGroup"],[1,"margin-bottom-4x"],["matInput","","formControlName","name"],[1,"flex-column","margin-bottom-4x"],["formControlName","shootingType"],[3,"value"],[1,"flex-column","align-items-start","margin-bottom-4x"],["formControlName","distance","suffix","m","moreIncrements",""],["formControlName","arrowCount"],[1,"flex-row","align-items-center","margin-bottom-4x"],[1,"no-bottom-space"],["formControlName","targetFace"],["width","56","height","56",1,"margin-left-1x",2,"border-radius","5px",3,"src"],["mat-flat-button","","type","submit",1,"margin-top-6x",3,"disabled"]],template:function(t,s){t&1&&f(0,we,31,10,"ng-container",0)},dependencies:[D,E,oe,Z,K,Q,X,ee,te,de,ae,re,ie,ne,ve,_e,L,B,le,me,se,pe,ce,O],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}}return o})();function Ne(o,m){if(o&1){let e=T();M(0),r(1,"app-page-with-title",1)(2,"mat-card",2)(3,"mat-card-content")(4,"app-create-session-form",3),w("formSubmitted",function(s){h(e);let _=c();return F(_.onFormDone(s))}),n()()()(),y()}if(o&2){let e=m.$implicit;i(),l("page-title",e("createSession.title"))}}var ft=(()=>{class o{constructor(){this.router=x(z)}onFormDone(e){this.router.navigate(["/sessions",e])}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=b({type:o,selectors:[["app-create-session-page"]],standalone:!0,features:[N],decls:1,vars:0,consts:[[4,"transloco"],["page-back-link","/",3,"page-title"],[1,"standard-centering"],[3,"formSubmitted"]],template:function(t,s){t&1&&f(0,Ne,5,1,"ng-container",0)},dependencies:[D,E,J,be,A,W,j],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}}return o})();export{ft as CreateSessionPageComponent};
