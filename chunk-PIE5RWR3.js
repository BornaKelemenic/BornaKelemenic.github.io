import{b as ot,c as at,d as st,e as ne,f as $t,g as wt,h as Lt}from"./chunk-GWRZDIQR.js";import"./chunk-ZCWHQBEF.js";import{a as vt,c as St,d as xt,e as Ct,f as yt,g as Mt,h as Tt,i as Dt,j as Ft,k as It,l as ae,n as se,o as re}from"./chunk-VRWA5SPR.js";import{e as Ke}from"./chunk-F3R66VUM.js";import{a as le,b as me,c as ce,d as pe}from"./chunk-XOYGVWCS.js";import{c as te,d as et,e as tt,f as it,g as nt,h as V,i as kt}from"./chunk-DIAMXMLB.js";import"./chunk-SGYCFQGT.js";import{a as ct,b as pt,e as ie,f as gt,g as A}from"./chunk-OHAUUH6Y.js";import{t as dt}from"./chunk-AUAKSQ24.js";import{a as rt,b as lt,c as Bt}from"./chunk-OSBMY2EH.js";import{d as Et}from"./chunk-R5MC2COQ.js";import"./chunk-2XJIAOKA.js";import{a as Pe,f as Ne,h as G,i as U,k as Ve,l as Ye,m as Qe}from"./chunk-4UFJ22MJ.js";import{a as ut}from"./chunk-YBGHXX72.js";import{a as mt,i as ft,k as _t,o as oe,q as ht,t as bt}from"./chunk-F2UQBV34.js";import{m as J,o as X,p as ee,q as B}from"./chunk-7Q7KTEYE.js";import{$ as Fe,$a as c,Ac as Ze,Da as g,Db as Y,Dc as be,E as I,Gb as Oe,H as j,Hc as We,Ia as p,Jb as Ae,Ka as W,Mc as Z,N as Te,Na as F,Nc as Je,O as De,Oa as H,Pc as Xe,Qa as z,Qb as N,Qc as y,R as m,Ra as R,Rc as M,Sa as a,Ta as s,Ua as _,V as h,Va as v,W as b,Wa as S,Wb as Q,Wc as k,Xc as w,Ya as E,_a as x,ba as Ee,ca as Ie,da as P,ea as $e,j as Ce,ja as Be,jb as q,kb as r,kc as je,lb as u,lc as He,m as ye,mb as d,n as ue,nb as fe,oa as o,ob as $,pb as _e,qb as he,qc as qe,ra as ke,tb as ze,tc as Ge,ub as C,uc as Ue,vb as T,wb as Re,xa as f,ya as we,z as Me,za as Le}from"./chunk-5K3J527P.js";import{a as xe,f as ge}from"./chunk-EQDQRRRY.js";var zt="mat-badge-content",qt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=f({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(i,n){},styles:[".mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-sys-error));color:var(--mat-badge-text-color, var(--mat-sys-on-error));font-family:var(--mat-badge-text-font, var(--mat-sys-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-sys-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-sys-corner-full))}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}@media(forced-colors: active){.mat-badge-content{outline:solid 1px;border-radius:0}}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-error) 38%, transparent));color:var(--mat-badge-disabled-state-text-color, var(--mat-sys-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, 6px);min-height:var(--mat-badge-small-size-container-size, 6px);line-height:var(--mat-badge-small-size-line-height, 6px);padding:var(--mat-badge-small-size-container-padding, 0);font-size:var(--mat-badge-small-size-text-size, 0);margin:var(--mat-badge-small-size-container-offset, -6px 0)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset, -6px)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, 16px);min-height:var(--mat-badge-container-size, 16px);line-height:var(--mat-badge-line-height, 16px);padding:var(--mat-badge-container-padding, 0 4px);font-size:var(--mat-badge-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-container-offset, -12px 0)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset, -12px)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, 16px);min-height:var(--mat-badge-large-size-container-size, 16px);line-height:var(--mat-badge-large-size-line-height, 16px);padding:var(--mat-badge-large-size-container-padding, 0 4px);font-size:var(--mat-badge-large-size-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-large-size-container-offset, -12px 0)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset, -12px)}"],encapsulation:2,changeDetection:0})}return t})(),Rt=(()=>{class t{_ngZone=m(Ee);_elementRef=m($e);_ariaDescriber=m(Ze);_renderer=m(ke);_animationMode=m(Be,{optional:!0});_idGenerator=m(Ue);get color(){return this._color}set color(e){this._setColor(e),this._color=e}_color="primary";overlap=!0;disabled;position="above after";get content(){return this._content}set content(e){this._updateRenderedContent(e)}_content;get description(){return this._description}set description(e){this._updateDescription(e)}_description;size="medium";hidden;_badgeElement;_inlineBadgeDescription;_isInitialized=!1;_interactivityChecker=m(qe);_document=m(Ae);constructor(){let e=m(je);e.load(qt),e.load(He)}isAbove(){return this.position.indexOf("below")===-1}isAfter(){return this.position.indexOf("before")===-1}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){let e=this._renderer.createElement("span"),i="mat-badge-active";return e.setAttribute("id",this._idGenerator.getId("mat-badge-content-")),e.setAttribute("aria-hidden","true"),e.classList.add(zt),this._animationMode==="NoopAnimations"&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),typeof requestAnimationFrame=="function"&&this._animationMode!=="NoopAnimations"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(i)})}):e.classList.add(i),e}_updateRenderedContent(e){let i=`${e??""}`.trim();this._isInitialized&&i&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=i),this._content=i}_updateDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!e||this._isHostInteractive())&&this._removeInlineDescription(),this._description=e,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,e):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(e){let i=this._elementRef.nativeElement.classList;i.remove(`mat-badge-${this._color}`),e&&i.add(`mat-badge-${e}`)}_clearExistingBadges(){let e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${zt}`);for(let i of Array.from(e))i!==this._badgeElement&&i.remove()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=Le({type:t,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(i,n){i&2&&W("mat-badge-overlap",n.overlap)("mat-badge-above",n.isAbove())("mat-badge-below",!n.isAbove())("mat-badge-before",!n.isAfter())("mat-badge-after",n.isAfter())("mat-badge-small",n.size==="small")("mat-badge-medium",n.size==="medium")("mat-badge-large",n.size==="large")("mat-badge-hidden",n.hidden||!n.content)("mat-badge-disabled",n.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",Y],disabled:[2,"matBadgeDisabled","disabled",Y],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",Y]}})}return t})(),Ot=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=we({type:t});static \u0275inj=De({imports:[Ge,be,be]})}return t})();var Ut={sortBy:ie.NEWEST_FIRST,targetFace:null,shootingType:null,distance:null},Pt="archery-stats-session-filters",L=(()=>{class t{constructor(){this.store=Ne({name:Pt},Ve(Ut)),Ye(this.store,{key:Pt,storage:Qe}),this.sortBy$=this.store.pipe(U(e=>e.sortBy),I({refCount:!0,bufferSize:1})),this.targetFace$=this.store.pipe(U(e=>e.targetFace),I({refCount:!0,bufferSize:1})),this.shootingType$=this.store.pipe(U(e=>e.shootingType),I({refCount:!0,bufferSize:1})),this.distance$=this.store.pipe(U(e=>e.distance),I({refCount:!0,bufferSize:1})),this.filters$=ue({sortBy:this.sortBy$,targetFace:this.targetFace$,shootingType:this.shootingType$,distance:this.distance$}).pipe(I({refCount:!0,bufferSize:1})),this.activeFiltersCount$=ue({targetFace:this.targetFace$,shootingType:this.shootingType$,distance:this.distance$}).pipe(ye(e=>{let i=0;return Object.values(e).forEach(n=>{dt(n)&&i++}),i}),I({refCount:!0,bufferSize:1}))}setSortBy(e){this.store.update(G("sortBy",e))}setTargetFace(e){this.store.update(G("targetFace",e))}setShootingType(e){this.store.update(G("shootingType",e))}setDistance(e){this.store.update(G("distance",e))}getStoreProp(e){return this.store.getValue()[e]}resetAll(){this.store.reset()}resetOnlyFilters(){Pe(()=>{let e=this.getStoreProp("sortBy");this.resetAll(),this.setSortBy(e)})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Zt(t,l){if(t&1&&(a(0,"mat-radio-button",3),r(1),s()),t&2){let e=l.$implicit,i=c().$implicit;p("value",e[0]),o(),d(" ",i(e[1])," ")}}function Kt(t,l){if(t&1&&(_(0,"img",8),a(1,"span",9),r(2),s()),t&2){let e=c().$implicit,i=c();p("ngSrc",i.TargetFaceImgMap.get(i.targetFaceControl.value)),o(2),d(" ",e(i.TargetFaceNameMap.get(i.targetFaceControl.value))," ")}}function Wt(t,l){if(t&1&&r(0),t&2){let e=c().$implicit;d(" ",e("generic.all")," ")}}function Yt(t,l){if(t&1&&($(0)(1),a(2,"mat-option",3),_(3,"img",8),a(4,"span",9),r(5),s()()),t&2){let e=l.$implicit,i=c().$implicit,n=c(),D=e[0],de=e[1];o(2),p("value",D),o(),p("ngSrc",n.TargetFaceImgMap.get(D)),o(2),d(" ",i(de)," ")}}function Qt(t,l){if(t&1&&(v(0),a(1,"div",1)(2,"label"),r(3),s(),a(4,"mat-radio-group",2)(5,"mat-radio-button",3),r(6),s(),z(7,Zt,2,2,"mat-radio-button",3,H),s()(),a(9,"mat-form-field",4)(10,"mat-label"),r(11),s(),a(12,"mat-select",2)(13,"mat-select-trigger"),g(14,Kt,3,2)(15,Wt,1,1),s(),a(16,"mat-option",5),r(17),s(),z(18,Yt,6,3,"mat-option",3,H),s()(),a(20,"div",6)(21,"label"),r(22),s(),_(23,"app-small-counter",7),s(),S()),t&2){let e=l.$implicit,i=c();o(3),d(" ",e("form.labels.shootingType"),": "),o(),p("formControl",i.shootingTypeControl),o(),p("value",null),o(),u(e("generic.all")),o(),R(i.ShootingTypeNameMap.entries()),o(4),u(e("form.labels.targetFace")),o(),p("formControl",i.targetFaceControl),o(2),F(i.targetFaceControl.value!=="all"?14:15),o(3),u(e("generic.all")),o(),R(i.TargetFaceNameMap.entries()),o(4),u(e("form.labels.distance")),o(),p("formControl",i.distanceControl)}}var Nt=(()=>{class t{constructor(){this.destroyRef=m(Fe),this.sessionFiltersRepo=m(L),this.TargetFaceNameMap=se,this.TargetFaceImgMap=re,this.ShootingType=It,this.ShootingTypeNameMap=ae,this.targetFaceControl=new oe(this.sessionFiltersRepo.getStoreProp("targetFace")??"all",{nonNullable:!0}),this.shootingTypeControl=new oe(this.sessionFiltersRepo.getStoreProp("shootingType")),this.distanceControl=new oe(this.sessionFiltersRepo.getStoreProp("distance"),{nonNullable:!0,validators:[ft.min(0)]}),this.listenToRepoValueChanges(),this.setupControlValueChangeListeners()}listenToRepoValueChanges(){this.sessionFiltersRepo.filters$.pipe(Z(this.destroyRef)).subscribe(({targetFace:e,shootingType:i,distance:n})=>{this.targetFaceControl.setValue(e??"all",{emitEvent:!1}),this.shootingTypeControl.setValue(i,{emitEvent:!1}),this.distanceControl.setValue(n,{emitEvent:!1})})}setupControlValueChangeListeners(){this.targetFaceControl.valueChanges.pipe(Z(this.destroyRef)).subscribe(e=>this.sessionFiltersRepo.setTargetFace(e==="all"?null:e)),this.shootingTypeControl.valueChanges.pipe(Z(this.destroyRef)).subscribe(e=>this.sessionFiltersRepo.setShootingType(e)),this.distanceControl.valueChanges.pipe(Z(this.destroyRef)).subscribe(e=>this.sessionFiltersRepo.setDistance(e===0?null:e))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-session-filters"]],decls:1,vars:0,consts:[[4,"transloco"],[1,"flex-column","margin-bottom-4x"],[3,"formControl"],[3,"value"],[1,"margin-bottom-4x"],["value","all"],[1,"flex-column","align-items-start"],["suffix","m","moreIncrements","",3,"formControl"],["width","30","height","30",2,"vertical-align","middle",3,"ngSrc"],[1,"margin-left-2x"]],template:function(i,n){i&1&&g(0,Qt,24,10,"ng-container",0)},dependencies:[bt,_t,ht,Q,M,y,Et,Mt,Ct,yt,Ft,St,vt,Tt,Dt,Ke,xt],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}}return t})();function Jt(t,l){if(t&1){let e=E();v(0),a(1,"h2",1),r(2),s(),a(3,"mat-dialog-content"),_(4,"app-session-filters"),s(),a(5,"mat-dialog-actions")(6,"button",2),r(7),s(),_(8,"span",3),a(9,"button",4),x("click",function(){h(e);let n=c();return b(n.sessionFiltersRepo.resetOnlyFilters())}),r(10),s()(),S()}if(t&2){let e=l.$implicit;o(2),d(" ",e("session.dialogs.filtersDialog.title")," "),o(5),d(" ",e("generic.close")," "),o(3),d(" ",e("generic.resetFilters")," ")}}var Vt=(()=>{class t{constructor(){this.sessionFiltersRepo=m(L)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-session-filters-dialog"]],decls:1,vars:0,consts:[[4,"transloco"],["mat-dialog-title",""],["mat-button","","type","button","mat-dialog-close",""],[1,"spacer"],["mat-button","","color","warn",3,"click"]],template:function(i,n){i&1&&g(0,Jt,11,3,"ng-container",0)},dependencies:[M,y,Nt,V,et,tt,nt,it,B,X],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}}return t})();function ei(t,l){if(t&1){let e=E();a(0,"button",7),x("click",function(n){return h(e),n.preventDefault(),b(n.stopPropagation())}),a(1,"mat-icon"),r(2),s()()}if(t&2){c();let e=q(4),i=c();p("matMenuTriggerFor",e),o(2),u(i.$icon())}}function ti(t,l){if(t&1){let e=E();a(0,"button",8),x("click",function(n){return h(e),n.preventDefault(),b(n.stopPropagation())}),a(1,"mat-icon"),r(2),s()()}if(t&2){c();let e=q(4),i=c();p("matMenuTriggerFor",e),o(2),u(i.$icon())}}function ii(t,l){if(t&1){let e=E();v(0),g(1,ei,3,2,"button",2)(2,ti,3,2,"button",3),a(3,"mat-menu",null,0)(5,"button",4),x("click",function(){h(e);let n=c();return b(n.toggleLock())}),a(6,"mat-icon"),r(7),s(),a(8,"span"),r(9),s()(),a(10,"button",5),x("click",function(){h(e);let n=c();return b(n.openEditDialog())}),a(11,"mat-icon"),r(12,"edit"),s(),a(13,"span"),r(14),s()(),a(15,"button",4),x("click",function(){h(e);let n=c();return b(n.deleteSession())}),a(16,"mat-icon",6),r(17,"delete"),s(),a(18,"span"),r(19),s()()(),S()}if(t&2){let e,i=l.$implicit,n=c();o(),F((e=n.$buttonType())==="icon"?1:e==="fab"?2:-1),o(6),u(n.$isSessionLocked()?"lock":"lock_open"),o(2),d(" ",n.$isSessionLocked()?i("session.actions.pressToUnlock"):i("session.actions.pressToLock")," "),o(),p("disabled",n.$isSessionLocked()),o(4),u(i("session.actions.editSession")),o(5),u(i("session.actions.deleteSession"))}}var At=(()=>{class t{constructor(){this.sessionsDbService=m(A),this.dialog=m(te),this.transloco=m(Xe),this.appStateRepo=m(ne),this.soundboard=m(wt),this.$isSessionLocked=Oe(()=>pt(this.$session().locked)),this.$session=P.required({alias:"session"}),this.$icon=P("more_vert",{alias:"icon-name"}),this.$buttonType=P("icon",{alias:"button-type"}),this.sessionDeleted=Ie()}deleteSession(){this.dialog.open(kt,{width:"500px",data:{text:this.transloco.translate("session.dialogs.deleteDialog.text")}}).afterClosed().pipe(Me(1)).subscribe(i=>ge(this,null,function*(){i&&(yield this.sessionsDbService.deleteSession(this.$session().id),this.appStateRepo.setLastVisitedSession(null),this.sessionDeleted.emit())}))}openEditDialog(){this.dialog.open(Lt,{width:"500px",data:{sessionId:this.$session().id}})}toggleLock(){return ge(this,null,function*(){this.soundboard.play(this.$isSessionLocked()?"unlock":"lock"),yield this.sessionsDbService.updateSession(this.$session().id,{locked:ct(!this.$isSessionLocked())})})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-session-options-menu"]],inputs:{$session:[1,"session","$session"],$icon:[1,"icon-name","$icon"],$buttonType:[1,"button-type","$buttonType"]},outputs:{sessionDeleted:"sessionDeleted"},decls:1,vars:0,consts:[["menu","matMenu"],[4,"transloco"],["mat-icon-button","","type","button",3,"matMenuTriggerFor"],["mat-fab","","type","button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click","disabled"],["color","warn"],["mat-icon-button","","type","button",3,"click","matMenuTriggerFor"],["mat-fab","","type","button",3,"click","matMenuTriggerFor"]],template:function(i,n){i&1&&g(0,ii,20,6,"ng-container",1)},dependencies:[M,y,B,J,ee,w,k,pe,me,le,ce,V],styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}}return t})();function ni(t,l){t&1&&(a(0,"mat-icon"),r(1,"lock"),s())}function oi(t,l){if(t&1&&(v(0),$(1),_(2,"img",1),a(3,"div",2)(4,"span",3),r(5),g(6,ni,2,0,"mat-icon"),s(),a(7,"small"),r(8),C(9,"date"),C(10,"dateDistance"),s(),a(11,"div",4)(12,"small"),r(13),s(),a(14,"small"),r(15,"\u2022"),s(),a(16,"small"),r(17),s(),a(18,"small"),r(19,"\u2022"),s(),a(20,"small"),r(21),C(22,"async"),s(),a(23,"small"),r(24,"\u2022"),s(),a(25,"small"),r(26),s(),a(27,"small"),r(28),C(29,"async"),s(),a(30,"small"),r(31,"\u2022"),s(),a(32,"small"),r(33),s(),a(34,"small"),r(35),C(36,"async"),s()()(),_(37,"app-session-options-menu",5),S()),t&2){let e=l.$implicit,i=c(),n=i.$session();o(2),p("ngSrc",i.TargetFaceImgMap.get(n.targetFace)),o(3),d(" ",n.name," "),o(),F(n.locked?6:-1),o(2),fe(" ",Re(9,14,n.date,"short")," (",T(10,17,n.date),") "),o(5),u(e(i.ShootingTypeNameMap.get(n.shootingType))),o(4),d("",n.distance,"m"),o(4),fe("",e("session.info.rounds"),": ",T(22,19,i.roundCount$),""),o(5),d("",e("session.info.avg"),":"),o(2),u(T(29,21,i.avgScore$)),o(5),d("",e("session.info.total"),":"),o(2),u(T(36,23,i.shotsTotal$)),o(2),p("session",n)}}var jt=(()=>{class t{constructor(){this.sessionsDbService=m(A),this.TargetFaceNameMap=se,this.TargetFaceImgMap=re,this.ShootingTypeNameMap=ae,this.roundCount$=Ce(mt(()=>this.sessionsDbService.getRoundsCountBySessionId(this.$session().id))),this.$session=P.required({alias:"session"}),this.session$=Je(this.$session).pipe(I({refCount:!0,bufferSize:1})),this.shotsTotal$=this.session$.pipe(j(e=>this.sessionsDbService.getTotalScoreBySessionID$(e.id))),this.avgScore$=this.session$.pipe(j(e=>this.sessionsDbService.getAverageScoreBySessionID$(e.id)))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-session-list-item"]],inputs:{$session:[1,"session","$session"]},decls:1,vars:0,consts:[[4,"transloco"],["alt","Target face","width","50","height","50",2,"border-radius","5px",3,"ngSrc"],[1,"flex-column","align-items-start"],[1,"session-name"],[1,"session-info"],[3,"session"]],template:function(i,n){i&1&&g(0,oi,38,25,"ng-container",0)},dependencies:[N,M,y,Q,Bt,$t,At,w,k],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:50px minmax(0,1fr) 40px;align-items:center;justify-content:flex-start;gap:var(--spacing-3x);padding:var(--spacing-2x)}.session-name[_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:var(--spacing-1x);font-size:1.25em}.session-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;column-gap:var(--spacing-1x)}"],changeDetection:0})}}return t})();function ai(t,l){t&1&&(a(0,"mat-icon",5),r(1,"radio_button_checked"),s())}function si(t,l){t&1&&(a(0,"mat-icon"),r(1,"radio_button_unchecked"),s())}function ri(t,l){if(t&1){let e=E();$(0)(1),a(2,"button",4),x("click",function(){h(e);let n=he(0),D=c(2);return b(D.sessionFiltersRepo.setSortBy(n))}),g(3,ai,2,0,"mat-icon",5)(4,si,2,0,"mat-icon"),a(5,"span"),r(6),s()()}if(t&2){let e=l.$implicit,i=c().$implicit,n=he(1),D=_e(e[0]),de=e[1];o(3),F(n===D?3:4),o(3),u(i(de))}}function li(t,l){if(t&1&&(v(0),$(1),C(2,"async"),a(3,"button",2)(4,"mat-icon"),r(5,"sort"),s(),r(6),s(),a(7,"mat-menu",null,0),z(9,ri,7,3,"button",3,H),s(),S()),t&2){let e=l.$implicit,i=q(8),n=c();o();let D=_e(T(2,2,n.sessionFiltersRepo.sortBy$));o(2),p("matMenuTriggerFor",i),o(3),d(" ",e(n.SessionSortLabelMap.get(D))," "),o(3),R(n.SessionSortLabelMap.entries())}}var Ht=(()=>{class t{constructor(){this.sessionFiltersRepo=m(L),this.SessionSort=ie,this.SessionSortLabelMap=gt}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-session-sort-menu"]],decls:1,vars:0,consts:[["menu","matMenu"],[4,"transloco"],["mat-button","","type","button",3,"matMenuTriggerFor"],["mat-menu-item",""],["mat-menu-item","",3,"click"],["color","primary"]],template:function(i,n){i&1&&g(0,li,11,5,"ng-container",1)},dependencies:[N,M,y,pe,me,le,ce,B,X,w,k],styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}}return t})();var mi=t=>["/sessions",t],ci=(t,l)=>l.id;function pi(t,l){t&1&&_(0,"mat-divider",10)}function di(t,l){if(t&1&&(a(0,"a",8),_(1,"app-session-list-item",9),C(2,"async"),s(),g(3,pi,1,0,"mat-divider",10)),t&2){let e=l.$implicit,i=l.$index,n=l.$count,D=c(2);p("routerLink",ze(7,mi,e.id)),o(),W("active",T(2,5,D.appStateRepo.lastVisitedSession$)===e.id),p("session",e),o(2),F(i!==n-1?3:-1)}}function gi(t,l){if(t&1&&(a(0,"h5",6),r(1),s()),t&2){let e=c().$implicit;o(),d(" ",e("sessionsList.noSessions")," ")}}function ui(t,l){if(t&1){let e=E();v(0),$(1),C(2,"async"),a(3,"app-page-with-title",1)(4,"button",2),x("click",function(){h(e);let n=c();return b(n.openFiltersDialog())}),a(5,"mat-icon",3),r(6,"tune"),s()(),a(7,"div",4)(8,"div",5),_(9,"app-session-sort-menu"),s(),z(10,di,4,9,null,null,ci,!1,gi,2,1,"h5",6),C(13,"async"),s(),a(14,"button",7)(15,"mat-icon"),r(16,"add"),s()()(),S()}if(t&2){let e=l.$implicit,i=c(),n=T(2,6,i.sessionFiltersRepo.activeFiltersCount$);o(3),p("page-title",e("sessionsList.title")),o(),p("matTooltip",e("generic.filters"))("matBadge",n)("matBadgeHidden",!n),o(),p("color",n?"primary":""),o(5),R(T(13,8,i.sessions$))}}var xo=(()=>{class t{constructor(){this.dialog=m(te),this.sessionsDbService=m(A),this.appStateRepo=m(ne),this.sessionFiltersRepo=m(L),this.sessions$=this.sessionFiltersRepo.filters$.pipe(j(e=>this.sessionsDbService.getFilteredSessions(xe({},e))))}openFiltersDialog(){this.dialog.open(Vt,{width:"500px"})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-session-list-page"]],decls:1,vars:0,consts:[[4,"transloco"],[3,"page-title"],["mat-icon-button","","page-action","",3,"click","matTooltip","matBadge","matBadgeHidden"],[3,"color"],[1,"standard-centering"],[1,"margin-bottom-2x"],[1,"text-center","margin-top-6x"],["mat-fab","","routerLink","/create",1,"fab-bottom-right"],[3,"routerLink"],[3,"session"],[1,"margin-y-4x"]],template:function(i,n){i&1&&g(0,ui,17,10,"ng-container",0)},dependencies:[N,We,M,y,jt,ut,Ht,B,J,ee,w,k,ot,V,st,at,Ot,Rt,lt,rt],styles:["[_nghost-%COMP%]{display:block;padding-bottom:var(--spacing-fab-clearance)}a[_ngcontent-%COMP%]{display:block}app-session-list-item.active[_ngcontent-%COMP%]{color:var(--mat-sys-primary)}mat-divider[_ngcontent-%COMP%]{--mat-divider-color: #2e2e2c}"],changeDetection:0})}}return t})();export{xo as SessionListPageComponent};
